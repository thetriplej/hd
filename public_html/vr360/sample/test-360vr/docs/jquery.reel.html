<!DOCTYPE html>

<html>
<head>
  <title>jquery.reel.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>jQuery Reel <em>1.3</em></h1>
              </div>
          </li>
        
        
        
        <li id='section-1'>
            <div class="annotation">
              
                <ul class="navigation">
                  <li class="first-new">
                    <a href="#Quick-Start">Quick Start</a>
                    <em class="additions">All other additions since 1.2 are marked red. Notably:</em>
                    <ul class="news">
                      <li class="new"><a href="#AMD-Compatibility">AMD Compatibility</a></li>
                      <li class="new"><a href="#Shy-Initialization">Shy Initialization</a></li>
                      <li class="new"><a href="#Responsiveness">Responsiveness</a> (w/ <a href="#Responsive-Events">Event</a>)</li>
                      <li class="new"><a href="#Gyroscope-Support">Gyroscope Support</a></li>
                      <li class="new"><a href="#Control-Events">Event interface</a></li>
                      <li class="new"><a href="#Data-Values-in-URLs">Data Values in URLs</a></li>
                    </ul>
                  </li>
                  <li>
                    <a href="#Methods">Methods</a>
                    <ul>
                      <li><a href="#Construction"><code>.reel([options])</code></a></li>
                      <li><a href="#Data"><code>.reel(data, [value])</code></a></li>
                      <li class="new"><a href="#Control-Events"><code>.reel(event, [arguments])</code></a></li>
                      <li><a href="#Destruction"><code>.unreel()</code></a></li>
                    </ul>
                  </li>
                  <li>
                    <a href="#Options">Options</a>
                    <ul>
                      <li><a href="#Annotations"><code>annotations</code></a></li>
                      <li><a href="#Customization"><code>area</code></a></li>
                      <li><a href="#Customization"><code>attr</code></a></li>
                      <li><a href="#Momentum"><code>brake</code></a></li>
                      <li><a href="#Interaction"><code>clickfree</code></a></li>
                      <li><a href="#Order-of-Images"><code>cw</code></a></li>
                      <li><a href="#Customization"><code>cursor</code></a></li>
                      <li><a href="#Animation"><code>delay</code></a></li>
                      <li><a href="#Directional-Mode"><code>directional</code></a></li>
                      <li><a href="#Interaction"><code>draggable</code></a></li>
                      <li class="new"><a href="#Animation"><code>duration</code></a></li>
                      <li><a href="#Opening-Animation"><code>entry</code></a></li>
                      <li><a href="#Sprite-Layout"><code>footage</code></a></li>
                      <li><a href="#Basic-Definition"><code>frame</code></a></li>
                      <li class="new"><a href="#Multi-Row-Locks"><code>framelock</code></a></li>
                      <li><a href="#Basic-Definition"><code>frames</code></a></li>
                      <li><a href="#Mathematics"><code>graph</code></a></li>
                      <li><a href="#Customization"><code>hint</code></a></li>
                      <li><a href="#Sprite-Layout"><code>horizontal</code></a></li>
                      <li><a href="#Sprite-Layout"><code>image</code></a></li>
                      <li><a href="#Sequence"><code>images</code></a></li>
                      <li><a href="#Customization"><code>indicator</code></a></li>
                      <li><a href="#Dual-Orbit-Mode"><code>inversed</code></a></li>
                      <li><a href="#Customization"><code>klass</code></a></li>
                      <li><a href="#Ticker"><code>laziness</code></a></li>
                      <li><a href="#Basic-Definition"><code>loops</code></a></li>
                      <li><a href="#Monitor"><code>monitor</code></a></li>
                      <li><a href="#Opening-Animation"><code>opening</code></a></li>
                      <li><a href="#Dual-Orbit-Mode"><code>orbital</code></a></li>
                      <li class="new"><a href="#Gyroscope-Interaction"><code>orientable</code></a></li>
                      <li><a href="#Sequence"><code>path</code></a></li>
                      <li><a href="#Images-Preload-Order"><code>preload</code></a></li>
                      <li><a href="#Customization"><code>preloader</code></a></li>
                      <li><a href="#Animation"><code>rebound</code></a></li>
                      <li class="new"><a href="#Responsiveness"><code>responsive</code></a></li>
                      <li><a href="#Sensitivity"><code>revolution</code></a></li>
                      <li><a href="#Multi-Row-Mode"><code>row</code></a></li>
                      <li class="new"><a href="#Multi-Row-Locks"><code>rowlock</code></a></li>
                      <li><a href="#Multi-Row-Mode"><code>rows</code></a></li>
                      <li><a href="#Interaction"><code>scrollable</code></a></li>
                      <li class="new"><a href="#Shy-Initialization"><code>shy</code></a></li>
                      <li><a href="#Sprite-Layout"><code>spacing</code></a></li>
                      <li><a href="#Animation"><code>speed</code></a></li>
                      <li><a href="#Interaction"><code>steppable</code></a></li>
                      <li><a href="#Rectilinear-Panorama"><code>stitched</code></a></li>
                      <li><a href="#Sprite-Layout"><code>suffix</code></a></li>
                      <li><a href="#Ticker"><code>tempo</code></a></li>
                      <li><a href="#Interaction"><code>throwable</code></a></li>
                      <li><a href="#Animation"><code>timeout</code></a></li>
                      <li><a href="#Momentum"><code>velocity</code></a></li>
                      <li><a href="#Dual-Orbit-Mode"><code>vertical</code></a></li>
                      <li><a href="#Interaction"><code>wheelable</code></a></li>
                    </ul>
                  </li>
                  <li>
                    <a href="#Events">Events</a>
                    <ul>
                      <li><a href="#down-Event"><code>down</code></a></li>
                      <li><a href="#loaded-Event"><code>loaded</code></a></li>
                      <li><a href="#opening-Event"><code>opening</code></a></li>
                      <li><a href="#openingDone-Event"><code>openingDone</code></a></li>
                      <li class="new"><a href="#orient-Event"><code>orient</code></a></li>
                      <li><a href="#pan-Event"><code>pan</code></a></li>
                      <li><a href="#pause-Event"><code>pause</code></a></li>
                      <li><a href="#play-Event"><code>play</code></a></li>
                      <li><a href="#preload-Event"><code>preload</code></a></li>
                      <li><a href="#preloaded-Event"><code>preloaded</code></a></li>
                      <li class="new"><a href="#prepare-Event"><code>prepare</code></a></li>
                      <li class="new"><a href="#Playback-Control-Events"><code>reach</code></a></li>
                      <li class="new"><a href="#Responsive-Events"><code>resize</code></a></li>
                      <li><a href="#setup-Event"><code>setup</code></a></li>
                      <li><a href="#Click-Stepping-Events"><code>stepLeft</code></a></li>
                      <li><a href="#Click-Stepping-Events"><code>stepRight</code></a></li>
                      <li class="new"><a href="#Click-Stepping-Events"><code>stepUp</code></a></li>
                      <li class="new"><a href="#Click-Stepping-Events"><code>stepDown</code></a></li>
                      <li><a href="#stop-Event"><code>stop</code></a></li>
                      <li><a href="#teardown-Event"><code>teardown</code></a></li>
                      <li><a href="#up-Event"><code>up</code></a></li>
                      <li><a href="#wheel-Event"><code>wheel</code></a></li>
                    </ul>
                  </li>
                  <li>
                    <a href="#Global-Namespace">Global Namespace</a>
                    <ul>
                      <li><a href="#Content-Delivery-Network"><code>cdn</code></a></li>
                      <li><a href="#Reel-Instances"><code>cost</code></a></li>
                      <li><a href="#Options"><code>def</code></a></li>
                      <li><a href="#Methods"><code>fn</code></a></li>
                      <li><a href="#Reel-Instances"><code>instances</code></a></li>
                      <li><a href="#Reel-Instances"><code>leader</code></a></li>
                      <li><a href="#Math-Behind"><code>math</code></a></li>
                      <li><a href="#Data-Value-Normalization"><code>normal</code></a></li>
                      <li><a href="#Preloading-Modes"><code>preload</code></a></li>
                      <li><a href="#Regular-Expressions"><code>re</code></a></li>
                      <li class="new"><a href="#Reel-Instances"><code>resize_gauge</code></a></li>
                      <li class="new"><a href="#Quick-Start"><code>scan()</code></a></li>
                      <li><a href="#Sequence-Build-up"><code>sequence()</code></a></li>
                      <li class="new"><a href="#Data-Values-in-URLs"><code>substitute()</code></a></li>
                      <li class="new"><a href="#Data-Values-in-URLs"><code>substitutes</code></a></li>
                      <li><a href="#reel-version"><code>version</code></a></li>
                    </ul>
                  </li>
                  <li class="new"><a href="../example/index.html">Examples</a></li>
                  <li><a href="../test/index.html">Tests</a></li>
                </ul>
              
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="comment">/**
          @@@@@@@@@@@@@@
      @@@@@@@@@@@@@@@@@@@@@@
    @@@@@@@@          @@@@@@@@
  @@@@@@@                @@@@@@@
 @@@@@@@                  @@@@@@@
 @@@@@@@                  @@@@@@@
 @@@@@@@@     @          @@@@@@@@
  @@@@@@@@@  @@@       @@@@@@@@@
   @@@@@@@@@@@@@@   @@@@@@@@@@@
     @@@@@@@@@@@@@    @@@@@@@
       @@@@@@@@@@@@     @@@
          @@@@@@
         @@@@
        @@
 *
 * jQuery Reel
 * ===========
 * The 360° plugin for jQuery
 *
 * @license Copyright (c) 2009-2013 Petr Vostrel (http://petr.vostrel.cz/)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * jQuery Reel
 * http://reel360.org
 * Version: 1.3.0
 * Updated: 2013-11-04
 *
 * Requires jQuery 1.6.2 or higher
 */</span>

<span class="comment">/*
 * CDN
 * ---
 * - http://code.vostrel.net/jquery.reel-bundle.js (recommended)
 * - http://code.vostrel.net/jquery.reel.js
 * - http://code.vostrel.net/jquery.reel-debug.js
 * - or http://code.vostrel.net/jquery.reel-edge.js if you feel like it ;)
 *
 * Optional Plugins
 * ----------------
 * - jQuery.mouseWheel [B] (Brandon Aaron, http://plugins.jquery.com/project/mousewheel)
 * - or jQuery.event.special.wheel (Three Dub Media, http://blog.threedubmedia.com/2008/08/eventspecialwheel.html)
 *
 * [B] Marked plugins are contained (with permissions) in the "bundle" version from the CDN
 */</span>

(<span class="keyword">function</span>(factory){</pre></div></div>
            
        </li>
        
        
        <li id='section-2'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='AMD-Compatibility'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#AMD-Compatibility">&#182;</a>
                </div>
              
              <h2>[NEW] AMD Compatibility</h2>

            </div>
            
        </li>
        
        
        <li id='section-4'>
            <div class="annotation">
              
              <p>Reel registers as an asynchronous module with dependency on jQuery for <a href="http://en.wikipedia.org/wiki/Asynchronous_module_definition">AMD</a> compatible script loaders.
Besides that it also complies with <a href="http://en.wikipedia.org/wiki/CommonJS">CommonJS</a> module definition for Node and such.
Of course, no fancy script loader is necessary and good old plain script tag still works too.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span>
    amd= <span class="keyword">typeof</span> define == <span class="string">'function'</span> &amp;&amp; define.amd &amp;&amp; (define([<span class="string">'jquery'</span>], factory) || <span class="literal">true</span>),
    commonjs= !amd &amp;&amp; <span class="keyword">typeof</span> module == <span class="string">'object'</span> &amp;&amp; <span class="keyword">typeof</span> module.exports == <span class="string">'object'</span> &amp;&amp; (module.exports= factory),
    plain= !amd &amp;&amp; !commonjs &amp;&amp; factory()

})(<span class="keyword">function</span>(){ <span class="keyword">return</span> jQuery.reel || (<span class="keyword">function</span>($, window, document, <span class="literal">undefined</span>){</pre></div></div>
            
        </li>
        
        
        <li id='section-5'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='jQuery'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#jQuery">&#182;</a>
                </div>
              
              <h2>jQuery</h2>

            </div>
            
        </li>
        
        
        <li id='section-7'>
            <div class="annotation">
              
              <p>One vital requirement is the correct jQuery. Reel requires at least version 1.6.2
and a make sure check is made at the very beginning.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">if</span> (!$) <span class="keyword">return</span>;
  <span class="keyword">var</span>
    version= $ &amp;&amp; $().jquery.split(<span class="regexp">/\./</span>)
  <span class="keyword">if</span> (!version || +(twochar(version[<span class="number">0</span>])+twochar(version[<span class="number">1</span>])+twochar(version[<span class="number">2</span>] || <span class="string">''</span>)) &lt; <span class="number">10602</span>)
    <span class="keyword">return</span> error(<span class="string">'Too old jQuery library. Please upgrade your jQuery to version 1.6.2 or higher'</span>);</pre></div></div>
            
        </li>
        
        
        <li id='section-8'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Global-Namespace'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Global-Namespace">&#182;</a>
                </div>
              
              <h2>Global Namespace</h2>

            </div>
            
        </li>
        
        
        <li id='section-10'>
            <div class="annotation">
              
              <p><code>$.reel</code> (or <code>jQuery.reel</code>) namespace is provided for storage of all Reel belongings.
It is locally referenced as just <code>reel</code> for speedier access.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span>
    reel= $.reel= {</pre></div></div>
            
        </li>
        
        
        <li id='reel-version'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-version">&#182;</a>
                </div>
              
              <h3><code>$.reel.version</code></h3>
<p><code>String</code> (major.minor.patch), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      version: <span class="string">'1.3.0'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Options'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Options">&#182;</a>
                </div>
              
              <h2>Options</h2>

            </div>
            
        </li>
        
        
        <li id='section-13'>
            <div class="annotation">
              
              <p>When calling <code>.reel()</code> method you have plenty of options (far too many) available.
You collect them into one hash and supply them with your call.</p>
<p><em><strong>Example:</strong> Initiate a non-looping Reel with 12 frames:</em></p>
<pre><code>.reel({
  frames: 12,
  looping: false
})</code></pre>
<p>All options are optional and if omitted, default value is used instead.
Defaults are being housed as members of <code>$.reel.def</code> hash.
If you customize any default value therein, all subsequent <code>.reel()</code> calls
will use the new value as default.</p>
<p><em><strong>Example:</strong> Change default initial frame to 5th:</em></p>
<pre><code>$.reel.def.frame = 5</code></pre>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-def'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-def">&#182;</a>
                </div>
              
              <h3><code>$.reel.def</code></h3>
<p><code>Object</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      def: {</pre></div></div>
            
        </li>
        
        
        <li id='Basic-Definition'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Basic-Definition">&#182;</a>
                </div>
              
              <h3>Basic Definition</h3>
<p>Reel is just fine with you not setting any options, however if you don&#39;t have
36 frames or beginning at frame 1, you will want to set total number
of <code>frames</code> and pick a different starting <code>frame</code>.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='frame-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#frame-Option">&#182;</a>
                </div>
              
              <h4><code>frame</code> Option</h4>
<p><code>Number</code> (frames), since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        frame:                  <span class="number">1</span>,</pre></div></div>
            
        </li>
        
        
        <li id='frames-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#frames-Option">&#182;</a>
                </div>
              
              <h4><code>frames</code> Option</h4>
<p><code>Number</code> (frames), since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        frames:                <span class="number">36</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-18'>
            <div class="annotation">
              
              <p>~~~</p>
<p>Another common characteristics of any Reel is whether it <code>loops</code> and covers
entire 360° or not.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='loops-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#loops-Option">&#182;</a>
                </div>
              
              <h4><code>loops</code> Option</h4>
<p><code>Boolean</code>, since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        loops:               <span class="literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Interaction'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Interaction">&#182;</a>
                </div>
              
              <h3>Interaction</h3>
<p>Using boolean switches many user interaction aspects can be turned on and off.
You can disable the mouse wheel control with <code>wheelable</code>, the drag &amp; throw
action with <code>throwable</code>, disallow the dragging completely with <code>draggable</code>,
on touch devices you can disable the browser&#39;s decision to scroll the page
instead of Reel script and you can of course disable the stepping of Reel by
clicking on either half of the image with <code>steppable</code>.</p>
<p>You can even enable <code>clickfree</code> operation,
which will cause Reel to bind to mouse enter/leave events instead of mouse down/up,
thus allowing a click-free dragging.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='clickfree-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#clickfree-Option">&#182;</a>
                </div>
              
              <h4><code>clickfree</code> Option</h4>
<p><code>Boolean</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        clickfree:          <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='draggable-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#draggable-Option">&#182;</a>
                </div>
              
              <h4><code>draggable</code> Option</h4>
<p><code>Boolean</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        draggable:           <span class="literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id='scrollable-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#scrollable-Option">&#182;</a>
                </div>
              
              <h4><code>scrollable</code> Option</h4>
<p><code>Boolean</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        scrollable:          <span class="literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id='steppable-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#steppable-Option">&#182;</a>
                </div>
              
              <h4><code>steppable</code> Option</h4>
<p><code>Boolean</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        steppable:           <span class="literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id='throwable-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#throwable-Option">&#182;</a>
                </div>
              
              <h4><code>throwable</code> Option</h4>
<p><code>Boolean</code>, since 1.1; or <code>Number</code>, since 1.2.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        throwable:           <span class="literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id='wheelable-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#wheelable-Option">&#182;</a>
                </div>
              
              <h4><code>wheelable</code> Option</h4>
<p><code>Boolean</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        wheelable:           <span class="literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Gyroscope-Support'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Gyroscope-Support">&#182;</a>
                </div>
              
              <h3>[NEW] Gyroscope Support</h3>
<p>When enabled allows gyro-enabled devices (iPad2 for example) to control rotational
position using the device&#39;s attitude in space. In this more, Reel directly maps the
360° range of your gyro&#39;s primary (alpha) axis directly to the value of <code>fraction</code>.</p>
<h4><code>orientable</code> Option</h4>
<p>[NEW] <code>Boolean</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        orientable:         <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Order-of-Images'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Order-of-Images">&#182;</a>
                </div>
              
              <h3>Order of Images</h3>
<p>Reel presumes counter-clockwise order of the pictures taken. If the nearer facing
side doesn&#39;t follow your cursor/finger, you did clockwise. Use the <code>cw</code> option to
correct this.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='cw-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#cw-Option">&#182;</a>
                </div>
              
              <h4><code>cw</code> Option</h4>
<p><code>Boolean</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        cw:                 <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Sensitivity'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Sensitivity">&#182;</a>
                </div>
              
              <h3>Sensitivity</h3>
<p>In Reel sensitivity is set through the <code>revolution</code> parameter, which represents horizontal
dragging distance one must cover to perform one full revolution. By default this value
is calculated based on the setup you have - it is either twice the width of the image
or half the width of stitched panorama. You may also set your own.</p>
<p>Optionally <code>revolution</code> can be set as an Object with <code>x</code> member for horizontal revolution
and/or <code>y</code> member for vertical revolution in multi-row movies.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='revolution-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#revolution-Option">&#182;</a>
                </div>
              
              <h4><code>revolution</code> Option</h4>
<p><code>Number</code> (pixels) or <code>Object</code>, since 1.1, <code>Object</code> support since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        revolution:     <span class="literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Rectilinear-Panorama'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Rectilinear-Panorama">&#182;</a>
                </div>
              
              <h3>Rectilinear Panorama</h3>
<p>The easiest of all is the stitched panorama mode. For this mode, instead of the sprite,
a single seamlessly stitched stretched image is used and the view scrolls the image.
This mode is triggered by setting a pixel width of the <code>stitched</code> image.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='stitched-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#stitched-Option">&#182;</a>
                </div>
              
              <h4><code>stitched</code> Option</h4>
<p><code>Number</code> (pixels), since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        stitched:               <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Directional-Mode'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Directional-Mode">&#182;</a>
                </div>
              
              <h3>Directional Mode</h3>
<p>As you may have noticed on Reel&#39;s homepage or in <a href="../example/object-movie-directional-sprite/"><code>example/object-movie-directional-sprite</code></a>
when you drag the arrow will point to either direction. In such <code>directional</code> mode, the sprite
is actually 2 in 1 - one file contains two sprites one tightly following the other, one
for visually going one way (<code>A</code>) and one for the other (<code>B</code>).</p>
<pre><code>A01 A02 A03 A04 A05 A06
A07 A08 A09 A10 A11 A12
A13 A14 A15 B01 B02 B03
B04 B05 B06 B07 B08 B09
B10 B11 B12 B13 B14 B15</code></pre>
<p>Switching between <code>A</code> and <code>B</code> frames is based on direction of the drag. Directional mode isn&#39;t
limited to sprites only, sequences also apply. The figure below shows the very same setup like
the above figure, only translated into actual frames of the sequence.</p>
<pre><code>001 002 003 004 005 006
007 008 009 010 011 012
013 014 015 016 017 018
019 020 021 022 023 024
025 026 027 028 029 030</code></pre>
<p>Frame <code>016</code> represents the <code>B01</code> so it actually is first frame of the other direction.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='directional-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#directional-Option">&#182;</a>
                </div>
              
              <h4><code>directional</code> Option</h4>
<p><code>Boolean</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        directional:        <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Multi-Row-Mode'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Multi-Row-Mode">&#182;</a>
                </div>
              
              <h3>Multi-Row Mode</h3>
<p>As <a href="../example/object-movie-multirow-sequence/"><code>example/object-movie-multirow-sequence</code></a> very nicely demonstrates, in multi-row arrangement
you can perform two-axis manipulation allowing you to add one or more vertical angles. Think of it as
a layered cake, each new elevation of the camera during shooting creates one layer of the cake -
- a <em>row</em>. One plain horizontal object movie full spin is one row:</p>
<pre><code>A01 A02 A03 A04 A05 A06
A07 A08 A09 A10 A11 A12
A13 A14 A15</code></pre>
<p>Second row tightly follows after the first one:</p>
<pre><code>A01 A02 A03 A04 A05 A06
A07 A08 A09 A10 A11 A12
A13 A14 A15 B01 B02 B03
B04 B05 B06 B07 B08 B09
B10 B11 B12 B13 B14 B15
C01...</code></pre>
<p>This way you stack up any number of <strong><code>rows</code></strong> you wish and set the initial <code>row</code> to start with.
Again, not limited to sprites, sequences also apply.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='row-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#row-Option">&#182;</a>
                </div>
              
              <h4><code>row</code> Option</h4>
<p><code>Number</code> (rows), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        row:                    <span class="number">1</span>,</pre></div></div>
            
        </li>
        
        
        <li id='rows-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#rows-Option">&#182;</a>
                </div>
              
              <h4><code>rows</code> Option</h4>
<p><code>Number</code> (rows), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        rows:                   <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Multi-Row-Locks'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Multi-Row-Locks">&#182;</a>
                </div>
              
              <h3>[NEW] Multi-Row Locks</h3>
<p>Optionally you can apply a lock on either of the two axes with <code>rowlock</code> and/or <code>framelock</code>.
That will disable direct mouse interaction and will leave using of <code>.reel()</code> the only way
of changing position on the locked axis.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='rowlock-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#rowlock-Option">&#182;</a>
                </div>
              
              <h4><code>rowlock</code> Option</h4>
<p>[NEW] <code>Boolean</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        rowlock:            <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='framelock-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#framelock-Option">&#182;</a>
                </div>
              
              <h4><code>framelock</code> Option</h4>
<p>[NEW] <code>Boolean</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        framelock:          <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Dual-Orbit-Mode'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Dual-Orbit-Mode">&#182;</a>
                </div>
              
              <h3>Dual-Orbit Mode</h3>
<p>Special form of multi-axis movie is the dual-axis mode. In this mode the object offers two plain
spins - horizontal and vertical orbits combined together crossing each other at the <code>frame</code>
forming sort of a cross if envisioned. <a href="../example/object-movie-dual-orbit-sequence/"><code>example/object-movie-dual-orbit-sequence</code></a> demonstrates
this setup. When the phone in the example is facing you (marked in the example with green square
in the top right), you are at the center. That is within the distance (in frames) defined
by the <code>orbital</code> option. Translation from horizontal to vertical orbit can be achieved on this sweet-spot.
By default horizontal orbit is chosen first, unless <code>vertical</code> option is used against.</p>
<p>In case the image doesn&#39;t follow the vertical drag, you may have your vertical orbit <code>inversed</code>.</p>
<p>Technically it is just a two-layer movie:</p>
<pre><code>A01 A02 A03 A04 A05 A06
A07 A08 A09 A10 A11 A12
A13 A14 A15 B01 B02 B03
B04 B05 B06 B07 B08 B09
B10 B11 B12 B13 B14 B15</code></pre>
<hr>

            </div>
            
        </li>
        
        
        <li id='orbital-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#orbital-Option">&#182;</a>
                </div>
              
              <h4><code>orbital</code> Option</h4>
<p><code>Number</code> (frames), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        orbital:                <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='vertical-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#vertical-Option">&#182;</a>
                </div>
              
              <h4><code>vertical</code> Option</h4>
<p><code>Boolean</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        vertical:           <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='inversed-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#inversed-Option">&#182;</a>
                </div>
              
              <h4><code>inversed</code> Option</h4>
<p><code>Boolean</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        inversed:           <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Sprite-Layout'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Sprite-Layout">&#182;</a>
                </div>
              
              <h3>Sprite Layout</h3>
<p>For both object movies and panoramas Reel presumes you use a combined <em>Sprite</em> to hold all your
frames in a single file. This powerful technique of using a sheet of several individual images
has many advantages in terms of compactness, loading, caching, etc. However, know your enemy,
be also aware of the limitations, which stem from memory limits of mobile
(learn more in <a href="https://github.com/pisi/Reel/wiki/FAQ">FAQ</a>).</p>
<p>Inside the sprite, individual frames are laid down one by one, to the right of the previous one
in a straight <em>Line</em>:</p>
<pre><code>01 02 03 04 05 06
07...</code></pre>
<p>Horizontal length of the line is reffered to as <code>footage</code>. Unless frames <code>spacing</code> in pixels
is set, edges of frames must touch.</p>
<pre><code>01 02 03 04 05 06
07 08 09 10 11 12
13 14 15 16 17 18
19 20 21 22 23 24
25 26 27 28 29 30
31 32 33 34 35 36</code></pre>
<p>This is what you&#39;ll get by calling <code>.reel()</code> without any options. All frames laid out 6 in line.
By default nicely even 6 x 6 grid like, which also inherits the aspect ratio of your frames.</p>
<p>By setting <code>horizontal</code> to <code>false</code>, instead of forming lines, frames are expected to form
<em>Columns</em>. All starts at the top left corner in both cases.</p>
<pre><code>01 07 13 19 25 31
02 08 14 20 26 32
03 09 15 21 27 33
04 10 16 22 28 34
05 11 17 23 29 35
06 12 18 24 30 36</code></pre>
<p>URL for the sprite image file is being build from the name of the original <code>&lt;img&gt;</code> <code>src</code> image
by adding a <code>suffix</code> to it. By default this results in <code>&quot;object-reel.jpg&quot;</code> for <code>&quot;object.jpg&quot;</code>.
You can also take full control over the sprite <code>image</code> URL that will be used.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='footage-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#footage-Option">&#182;</a>
                </div>
              
              <h4><code>footage</code> Option</h4>
<p><code>Number</code> (frames), since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        footage:                <span class="number">6</span>,</pre></div></div>
            
        </li>
        
        
        <li id='spacing-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#spacing-Option">&#182;</a>
                </div>
              
              <h4><code>spacing</code> Option</h4>
<p><code>Number</code> (pixels), since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        spacing:                <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='horizontal-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#horizontal-Option">&#182;</a>
                </div>
              
              <h4><code>horizontal</code> Option</h4>
<p><code>Boolean</code>, since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        horizontal:          <span class="literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id='suffix-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#suffix-Option">&#182;</a>
                </div>
              
              <h4><code>suffix</code> Option</h4>
<p><code>String</code>, since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        suffix:           <span class="string">'-reel'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='image-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#image-Option">&#182;</a>
                </div>
              
              <h4><code>image</code> Option</h4>
<p><code>String</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        image:          <span class="literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Sequence'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Sequence">&#182;</a>
                </div>
              
              <h3>Sequence</h3>
<p>Collection of individual frame images is called <em>Sequence</em> and it this way one HTTP request per
frame is made carried out as opposed to sprite with one request per entire sprite. Define it with
string like: <code>&quot;image_###.jpg&quot;</code>. The <code>#</code> placeholders will be replaced with a numeric +1 counter
padded to the placeholders length.
Learn more about <a href="Sequences">sequences</a>.</p>
<p>In case you work with hashed filenames like <code>64bc654d21cb.jpg</code>, where no counter element can
be indentified, or you prefer direct control, <code>images</code> can also accept array of plain URL strings.</p>
<p>All images are retrieved from a specified <code>path</code>.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='images-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#images-Option">&#182;</a>
                </div>
              
              <h4><code>images</code> Option</h4>
<p>[IMPROVED] <code>String</code> or <code>Array</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        images:                <span class="string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id='path-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#path-Option">&#182;</a>
                </div>
              
              <h4><code>path</code> Option</h4>
<p><code>String</code> (URL path), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        path:                  <span class="string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Images-Preload-Order'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Images-Preload-Order">&#182;</a>
                </div>
              
              <h3>Images Preload Order</h3>
<p>Given sequence images can be additionally reordered to achieve a perceived faster preloading.
Value given to <code>preload</code> option must match a name of a pre-registered function within
<code>$.reel.preload</code> object. There are two functions built-in:</p>
<ul>
<li><code>&quot;fidelity&quot;</code> - non-linear way that ensures even spreading of preloaded images around the entire
revolution leaving the gaps in-between as small as possible. This results in a gradually
increasing fidelity of the image rather than having one large shrinking gap. This is the default
behavior.</li>
<li><code>&quot;linear&quot;</code> - linear order of preloading</li>
</ul>
<hr>

            </div>
            
        </li>
        
        
        <li id='preload-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#preload-Option">&#182;</a>
                </div>
              
              <h4><code>preload</code> Option</h4>
<p><code>String</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        preload:       <span class="string">'fidelity'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Shy-Initialization'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Shy-Initialization">&#182;</a>
                </div>
              
              <h3>[NEW] Shy Initialization</h3>
<p>Sometimes, on-demand activation is desirable in order to conserve device resources or bandwidth
especially with multiple instances on a single page. If so, enable <em>shy mode</em>, in which Reel will
hold up the initialization process until the image is clicked by the user. Alternativelly you can
initialize shy instance by triggering <code>&quot;setup&quot;</code> event.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='shy-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#shy-Option">&#182;</a>
                </div>
              
              <h4><code>shy</code> Option</h4>
<p>[NEW] <code>Boolean</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        shy:                <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Animation'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Animation">&#182;</a>
                </div>
              
              <h3>Animation</h3>
<p>Your object movie or a panorama can perform an autonomous sustained motion in one direction.
When <code>speed</code> is set in revolutions per second (Hz), after a given <code>delay</code> the instance will
animate and advance frames by itself.</p>
<pre><code>t
|-------›|-----------›
  Delay    Animation</code></pre>
<p>Start and resume of animation happens when given <code>timeout</code> has elapsed since user became idle.</p>
<pre><code>t
|-----------›|= == ==  = === = = |          |-----------›
  Animation    User interaction    Timeout    Animation</code></pre>
<p>When a scene doesn&#39;t loop (see <a href="#loops-Option"><code>loops</code></a>) and the animation reaches one end,
it stays there for a while and then reversing the direction of the animation it bounces back
towards the other end. The time spent on the edge can be customized with <code>rebound</code>.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='speed-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#speed-Option">&#182;</a>
                </div>
              
              <h4><code>speed</code> Option</h4>
<p><code>Number</code> (Hz), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        speed:                  <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='delay-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#delay-Option">&#182;</a>
                </div>
              
              <h4><code>delay</code> Option</h4>
<p><code>Number</code> (seconds), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        delay:                  <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='timeout-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#timeout-Option">&#182;</a>
                </div>
              
              <h4><code>timeout</code> Option</h4>
<p><code>Number</code> (seconds), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        timeout:                <span class="number">2</span>,</pre></div></div>
            
        </li>
        
        
        <li id='duration-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#duration-Option">&#182;</a>
                </div>
              
              <h4><code>duration</code> Option</h4>
<p><code>Number</code> (seconds), since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        duration:       <span class="literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id='rebound-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#rebound-Option">&#182;</a>
                </div>
              
              <h4><code>rebound</code> Option</h4>
<p><code>Number</code> (seconds), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        rebound:              <span class="number">0.5</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Opening-Animation'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Opening-Animation">&#182;</a>
                </div>
              
              <h3>Opening Animation</h3>
<p>Chance is you want the object to spin a little to attract attention and then stop and wait
for the user to engage. This is called &quot;opening animation&quot; and it is performed for given number
of seconds (<code>opening</code>) at dedicated <code>entry</code> speed. The <code>entry</code> speed defaults to value of <code>speed</code>
option. After the opening animation has passed, regular animation procedure begins starting with
the delay (if any).</p>
<pre><code>t
|--------›|-------›|-----------›
  Opening   Delay    Animation</code></pre>
<hr>

            </div>
            
        </li>
        
        
        <li id='entry-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#entry-Option">&#182;</a>
                </div>
              
              <h4><code>entry</code> Option</h4>
<p><code>Number</code> (Hz), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        entry:          <span class="literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id='opening-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#opening-Option">&#182;</a>
                </div>
              
              <h4><code>opening</code> Option</h4>
<p><code>Number</code> (seconds), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        opening:                <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Momentum'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Momentum">&#182;</a>
                </div>
              
              <h3>Momentum</h3>
<p>Often also called inertial motion is a result of measuring a velocity of dragging. This velocity
builds up momentum, so when a drag is released, the image still retains the momentum and continues
to spin on itself. Naturally the momentum soon wears off as <code>brake</code> is being applied.</p>
<p>One can utilize this momentum for a different kind of an opening animation. By setting initial
<code>velocity</code>, the instance gets artificial momentum and spins to slow down to stop.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='brake-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#brake-Option">&#182;</a>
                </div>
              
              <h4><code>brake</code> Option</h4>
<p><code>Number</code>, since 1.1, where it also has a different default <code>0.5</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        brake:               <span class="number">0.23</span>,</pre></div></div>
            
        </li>
        
        
        <li id='velocity-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#velocity-Option">&#182;</a>
                </div>
              
              <h4><code>velocity</code> Option</h4>
<p><code>Number</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        velocity:               <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Ticker'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Ticker">&#182;</a>
                </div>
              
              <h3>Ticker</h3>
<p>For purposes of animation, Reel starts and maintains a timer device which emits ticks timing all
animations. There is only one ticker running in the document and all instances subscribe to this
one ticker. Ticker is equipped with a mechanism, which compensates for the  measured costs
of running Reels to ensure the ticker ticks on time. The <code>tempo</code> (in Hz) of the ticker can be
specified.</p>
<p>Please note, that ticker is synchronized with a <em>leader</em>, the oldest living instance on page,
and adjusts to his tempo.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='tempo-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#tempo-Option">&#182;</a>
                </div>
              
              <h4><code>tempo</code> Option</h4>
<p><code>Number</code> (Hz, ticks per second), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        tempo:                 <span class="number">36</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-73'>
            <div class="annotation">
              
              <p>~~~</p>
<p>Since many mobile devices are sometimes considerably underpowered in comparison with desktops,
they often can keep up with the 36 Hz rhythm. In Reel these are called <strong>lazy devices</strong>
and everything mobile qualifies as lazy for the sake of the battery and interaction fluency.
The ticker is under-clocked for them by a <code>laziness</code> factor, which is used to divide the <code>tempo</code>.
Default <code>laziness</code> of <code>6</code> will effectively use 6 Hz instead (6 = 36 / 6) on lazy devices.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='laziness-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#laziness-Option">&#182;</a>
                </div>
              
              <h4><code>laziness</code> Option</h4>
<p><code>Number</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        laziness:               <span class="number">6</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Customization'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Customization">&#182;</a>
                </div>
              
              <h3>Customization</h3>
<p>You can customize Reel on both functional and visual front. The most visible thing you can
customize is probably the <code>cursor</code>, size of the <code>preloader</code>, perhaps add visual <code>indicator</code>(s)
of Reel&#39;s position within the range. You can also set custom <code>hint</code> for the tooltip, which appears
when you mouse over the image area. Last but not least you can also add custom class name <code>klass</code>
to the instance.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='cursor-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#cursor-Option">&#182;</a>
                </div>
              
              <h4><code>cursor</code> Option</h4>
<p><code>String</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        cursor:         <span class="literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id='hint-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#hint-Option">&#182;</a>
                </div>
              
              <h4><code>hint</code> Option</h4>
<p><code>String</code>, since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        hint:                  <span class="string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id='indicator-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#indicator-Option">&#182;</a>
                </div>
              
              <h4><code>indicator</code> Option</h4>
<p><code>Number</code> (pixels), since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        indicator:              <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='klass-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#klass-Option">&#182;</a>
                </div>
              
              <h4><code>klass</code> Option</h4>
<p><code>String</code>, since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        klass:                 <span class="string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id='preloader-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#preloader-Option">&#182;</a>
                </div>
              
              <h4><code>preloader</code> Option</h4>
<p><code>Number</code> (pixels), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        preloader:              <span class="number">2</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-81'>
            <div class="annotation">
              
              <p>~~~</p>
<p>You can use custom attributes (<code>attr</code>) on the node - it accepts the same name-value pairs object
jQuery <code>.attr()</code> does. In case you want to delegate full interaction control over the instance
to some other DOM element(s) on page, you can with <code>area</code>.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='area-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#area-Option">&#182;</a>
                </div>
              
              <h4><code>area</code> Option</h4>
<p><code>jQuery</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        area:           <span class="literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id='attr-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#attr-Option">&#182;</a>
                </div>
              
              <h4><code>attr</code> Option</h4>
<p><code>Object</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        attr:                  {},</pre></div></div>
            
        </li>
        
        
        <li id='Annotations'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Annotations">&#182;</a>
                </div>
              
              <h3>Annotations</h3>
<p>To further visually describe your scene you can place all kinds of in-picture HTML annotations
by defining an <code>annotations</code> object. Learn more about <a href="https://github.com/pisi/Reel/wiki/Annotations">Annotations</a> in a dedicated article.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='annotations-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#annotations-Option">&#182;</a>
                </div>
              
              <h4><code>annotations</code> Option</h4>
<p><code>Object</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        annotations:    <span class="literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Responsiveness'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Responsiveness">&#182;</a>
                </div>
              
              <h3>[NEW] Responsiveness</h3>
<p>By default, dimensions of Reel are fixed and pixel-match the dimensions of the original image
and the responsive mode is disabled. Using <code>responsive</code> option you can enable responsiveness.
In such a case Reel will adopt dimensions of its parent container element and scale all relevant
data store values accordingly.
The scale applied is stored in <code>&quot;ratio&quot;</code> data key, where <code>1.0</code> means 100% or no scale.</p>
<p>To take full advantage of this, you can setup your URLs to contain actual dimensions and
serve images in appropriate detail.
Learn more about <a href="#Data-Values-in-URLs">data values in URLs</a>.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='responsive-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#responsive-Option">&#182;</a>
                </div>
              
              <h4><code>responsive</code> Option</h4>
<p>[NEW] <code>Boolean</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        responsive:         <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Mathematics'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Mathematics">&#182;</a>
                </div>
              
              <h3>Mathematics</h3>
<p>When reeling, instance conforms to a graph function, which defines whether it will loop
(<code>$.reel.math.hatch</code>) or it won&#39;t (<code>$.reel.math.envelope</code>). My math is far from flawless
and I&#39;m sure there are much better ways how to handle things. the <code>graph</code> option is there for you
shall you need it. It accepts a function, which should process given criteria and return
a fraction of 1.</p>
<pre><code>function( x, start, revolution, lo, hi, cwness, y ){
  return fraction  // 0.0 - 1.0
}</code></pre>
<hr>

            </div>
            
        </li>
        
        
        <li id='graph-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#graph-Option">&#182;</a>
                </div>
              
              <h4><code>graph</code> Option</h4>
<p><code>Function</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        graph:          <span class="literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id='Monitor'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Monitor">&#182;</a>
                </div>
              
              <h3>Monitor</h3>
<p>Specify a string data key and you will see its real-time value dumped in the upper-left corner
of the viewport. Its visual can be customized by CSS using <code>.jquery-reel-monitor</code> selector.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='monitor-Option'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#monitor-Option">&#182;</a>
                </div>
              
              <h4><code>monitor</code> Option</h4>
<p><code>String</code> (data key), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        monitor:        <span class="literal">undefined</span>

      },</pre></div></div>
            
        </li>
        
        
        <li id='section-92'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Quick-Start'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Quick-Start">&#182;</a>
                </div>
              
              <h2>[NEW] Quick Start</h2>

            </div>
            
        </li>
        
        
        <li id='section-94'>
            <div class="annotation">
              
              <p>For basic Reel initialization, you don&#39;t even need to write any Javascript!
All it takes is to add <strong>class name</strong> <code>&quot;reel&quot;</code> to your <code>&lt;img&gt;</code> HTML tag,
assign an unique <strong><code>id</code> attribute</strong> and decorate the tag with configuration <strong>data attributes</strong>.
Result of which will be interactive Reel projection.</p>
<pre><code>&lt;img src=&quot;some/image.jpg&quot; width=&quot;300&quot; height=&quot;200&quot;
  id=&quot;my_image&quot;
  class=&quot;reel&quot;
  data-images=&quot;some/images/01.jpg, some/images/02.jpg&quot;
  data-speed=&quot;0.5&quot;&gt;</code></pre>
<p>All otherwise Javascript <a href="#Options">options</a> are made available as HTML <code>data-*</code> attributes.</p>
<p>Only the <code>annotations</code> option doesn&#39;t work this way. To quickly create annotations,
simply have any HTML node (<code>&lt;div&gt;</code> prefferably) anywhere in the DOM,
assign it <strong>class name</strong> <code>&quot;reel-annotation&quot;</code>, an unique <strong><code>id</code> attribute</strong>
and add configuration <strong>data attributes</strong>.</p>
<pre><code>&lt;div id=&quot;my_annotation&quot;
  class=&quot;reel-annotation&quot;
  data-for=&quot;my_image&quot;
  data-x=&quot;120&quot;
  data-y=&quot;60&quot;&gt;
  Whatever HTML I&#39;d like to have in the annotation
&lt;/div&gt;</code></pre>
<p>Most important is the <code>data-for</code> attribute, which references target Reel instance by <code>id</code>.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='section-95'>
            <div class="annotation">
              
              <p>Responsible for discovery and subsequent conversion of data-configured Reel images is
<code>$.reel.scan()</code> method, which is being called automagically when the DOM becomes ready.
Under normal circumstances you don&#39;t need to scan by yourself.</p>
<p>It however comes in handy to re-scan when you happen to inject a data-configured Reel <code>&lt;img&gt;</code>
into already ready DOM.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-scan-Method'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-scan-Method">&#182;</a>
                </div>
              
              <h3><code>$.reel.scan()</code> Method</h3>
<p>[NEW] returns <code>jQuery</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      scan: <span class="keyword">function</span>(){
        <span class="keyword">return</span> $(dot(klass)+<span class="string">':not('</span>+dot(overlay_klass)+<span class="string">' &gt; '</span>+dot(klass)+<span class="string">')'</span>).each(<span class="keyword">function</span>(ix, image){
          <span class="keyword">var</span>
            $image= $(image),
            options= $image.data(),
            images= options.images= soft_array(options.images),
            annotations= {}
          $(dot(annotation_klass)+<span class="string">'[data-for='</span>+$image.attr(_id_)+<span class="string">']'</span>).each(<span class="keyword">function</span>(ix, annotation){
            <span class="keyword">var</span>
              $annotation= $(annotation),
              def= $annotation.data(),
              x= def.x= numerize_array(soft_array(def.x)),
              y= def.y= numerize_array(soft_array(def.y)),
              id= $annotation.attr(_id_),
              node= def.node= $annotation.removeData()
            annotations[id] = def;
          });
          options.annotations = annotations;
          $image.removeData().reel(options);
        });
      },</pre></div></div>
            
        </li>
        
        
        <li id='section-97'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Methods'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Methods">&#182;</a>
                </div>
              
              <h2>Methods</h2>

            </div>
            
        </li>
        
        
        <li id='section-99'>
            <div class="annotation">
              
              <p>Reel&#39;s methods extend jQuery core functions with members of its <code>$.reel.fn</code> object. Despite Reel
being a typical one-method plug-in with its <code>.reel()</code> function, for convenience it also offers
its bipolar twin <code>.unreel()</code>.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-fn'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-fn">&#182;</a>
                </div>
              
              <h3><code>$.reel.fn</code></h3>
<p>returns <code>Object</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      fn: {</pre></div></div>
            
        </li>
        
        
        <li id='section-101'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Construction'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Construction">&#182;</a>
                </div>
              
              <h2>Construction</h2>

            </div>
            
        </li>
        
        
        <li id='section-103'>
            <div class="annotation">
              
              <p><code>.reel()</code> method is the core of Reel and similar to some jQuery functions, it has adaptive interface.
It either builds, <a href="#Data">reads &amp; writes data</a> or <a href="#Control-Events">causes events</a>.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-options-Method'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-options-Method">&#182;</a>
                </div>
              
              <h3><code>.reel( [options] )</code> Method</h3>
<p>returns <code>jQuery</code>, since 1.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        reel: <span class="keyword">function</span>(){
          <span class="keyword">var</span>
            args= arguments,
            t= $(<span class="keyword">this</span>),
            data= t.data(),
            name= args[<span class="number">0</span>] || {},
            value= args[<span class="number">1</span>]</pre></div></div>
            
        </li>
        
        
        <li id='section-105'>
            <div class="annotation">
              
              <p>The main <a href="#Construction-Core">core of this procedure</a> is rather bulky, so let&#39;s skip it for now
and instead let me introduce the other uses first.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='Control-Events'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Control-Events">&#182;</a>
                </div>
              
              <h2>[NEW] Control Events</h2>

            </div>
            
        </li>
        
        
        <li id='section-107'>
            <div class="annotation">
              
              <p><a href="http://api.jquery.com/category/events/event-object/">Event</a> messages are what ties and binds all Reel&#39;s internal working components together.
Besides being able to binding to any of these events from your script and react on Reel status changes
(e.g. position), you can also trigger some of them in order to control Reel&#39;s attitude.</p>
<p>You can:</p>
<ul>
<li>control the playback of animated Reels with <a href="#play-Event"><code>play</code></a>, <a href="#pause-Event"><code>pause</code></a>
or <a href="#stop-Event"><code>stop</code></a></li>
<li>step the Reel in any direction with <a href="#stepRight-Event"><code>stepRight</code></a>, <a href="#stepLeft-Event"><code>stepLeft</code></a>,
<a href="#stepUp-Event"><code>stepUp</code></a>, <a href="#stepDown-Event"><code>stepDown</code></a>, </li>
<li>reach certain frame with <a href="#reach-Event"><code>reach</code></a></li>
</ul>
<p>Triggering Reel&#39;s control event is as simple as passing the desired event name to <code>.reel()</code>.</p>
<p><em><strong>Example:</strong> Stop the animation in progress:</em></p>
<pre><code>.reel(&#39;:stop&#39;)</code></pre>
<p>Think of <code>.reel()</code> as a convenient shortcut to and synonym for <a href="http://api.jquery.com/trigger"><code>.trigger()</code></a>, only prefix
the event name with <code>:</code>. Of course you can use simple <code>.trigger()</code> instead and without the colon.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-event-arguments'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#reel-event-arguments">&#182;</a>
                </div>
              
              <h4><code>.reel( event, [arguments] )</code></h4>
<p>returns <code>jQuery</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (<span class="keyword">typeof</span> name != <span class="string">'object'</span>){

            <span class="keyword">if</span> (name.slice(<span class="number">0</span>, <span class="number">1</span>) == <span class="string">':'</span>){
              <span class="keyword">return</span> t.trigger(name.slice(<span class="number">1</span>), value);
            }</pre></div></div>
            
        </li>
        
        
        <li id='section-109'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Data'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Data">&#182;</a>
                </div>
              
              <h2>Data</h2>

            </div>
            
        </li>
        
        
        <li id='section-111'>
            <div class="annotation">
              
              <p>Reel stores all its inner state values with the standard DOM <a href="http://api.jquery.com/data">data interface</a> interface
while adding an additional change-detecting event layer, which makes Reel entirely data-driven.</p>
<p><em><strong>Example:</strong> Find out on what frame a Reel instance currently is:</em></p>
<pre><code>.reel(&#39;frame&#39;) // Returns the frame number</code></pre>
<p>This time think of <code>.reel(data)</code> as a synonym for <code>.data()</code>. Note, that you can therefore easily
inspect the entire datastore with <code>.data()</code> (without arguments). Use it for debugging only.
For real-time data watch use <a href="#Monitor"><code>monitor</code></a> option instead of manually hooking into
the data.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-data'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#reel-data">&#182;</a>
                </div>
              
              <h4><code>.reel( data )</code></h4>
<p>can return anything, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">else</span>{
              <span class="keyword">if</span> (args.length == <span class="number">1</span>){
                <span class="keyword">return</span> data[name]
              }</pre></div></div>
            
        </li>
        
        
        <li id='Write-Access'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Write-Access">&#182;</a>
                </div>
              
              <h3>Write Access</h3>
<p>You can store any value the very same way by passing the value as the second function
argument.</p>
<p><em><strong>Example:</strong> Jump to frame 12:</em></p>
<pre><code>.reel(&#39;frame&#39;, 12)</code></pre>
<p>Only a handful of data keys is suitable for external manipulation. These include <code>area</code>,
<code>backwards</code>, <code>brake</code>, <strong><code>fraction</code></strong>, <strong><code>frame</code></strong>, <code>playing</code>, <code>reeling</code>, <strong><code>row</code></strong>, <code>speed</code>,
<code>stopped</code>, <code>velocity</code> and <code>vertical</code>. Use the rest of the keys for reading only, you can
mess up easily changing them.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-data-value'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h4">
                  <a class="pilcrow" href="#reel-data-value">&#182;</a>
                </div>
              
              <h4><code>.reel( data, value )</code></h4>
<p>returns <code>jQuery</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              <span class="keyword">else</span>{
                <span class="keyword">if</span> (value !== <span class="literal">undefined</span>){
                  reel.normal[name] &amp;&amp; (value= reel.normal[name](value, data));</pre></div></div>
            
        </li>
        
        
        <li id='Changes'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#Changes">&#182;</a>
                </div>
              
              <h3>Changes</h3>
<p>Any value that does not equal (<code>===</code>) the old value is considered <em>new value</em> and
in such a case Reel will trigger a <em>change event</em> to announce the change. The event
type takes form of <em><code>key</code></em><code>Change</code>, where <em><code>key</code></em> will be the data key/name you&#39;ve
just assigned.</p>
<p><em><strong>Example:</strong> Setting <code>&quot;frame&quot;</code> to <code>12</code> in the above example will trigger
<code>&quot;frameChange&quot;</code>.</em></p>
<p>Some of these <em>change events</em> (like <code>frame</code> or <code>fraction</code>) have a
default handler attached.</p>
<p>You can easily bind to any of the data key change with standard event
binding methods.</p>
<p><em><strong>Example:</strong> React on instance being manipulated or not:</em></p>
<pre><code>.bind(&#39;reelingChange&#39;, function(evnt, nothing, reeling){
  if (reeling) console.log(&#39;Rock &amp; reel!&#39;)
  else console.log(&#39;Not reeling...&#39;)
})</code></pre>
<hr>

            </div>
            
        </li>
        
        
        <li id='section-116'>
            <div class="annotation">
              
              <p>The handler function will be executed every time the value changes and
it will be supplied with three arguments. First one is the event object
as usual, second is <code>undefined</code> and the third will be the actual value.
In this case it was a boolean type value.
If the second argument is not <code>undefined</code> it is the backward compatible
&quot;before&quot; event triggered from outside Reel.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="keyword">if</span> (data[name] === <span class="literal">undefined</span>) data[name]= value
                  <span class="keyword">else</span> <span class="keyword">if</span> (data[name] !== value) t.trigger(name+<span class="string">'Change'</span>, [ <span class="literal">undefined</span>, data[name]= value ]);
                }
                <span class="keyword">return</span> t
              }
            }
          }</pre></div></div>
            
        </li>
        
        
        <li id='section-117'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Construction-Core'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Construction-Core">&#182;</a>
                </div>
              
              <h2>Construction Core</h2>

            </div>
            
        </li>
        
        
        <li id='section-119'>
            <div class="annotation">
              
              <p>Now, back to the procedure of <a href="#Construction">constructing</a> a Reel instance
and binding its event handlers.</p>
<p>Establish local <code>opt</code> object made by extending the defaults.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">else</span>{

          <span class="keyword">var</span>
            opt= $.extend({}, reel.def, name),</pre></div></div>
            
        </li>
        
        
        <li id='section-120'>
            <div class="annotation">
              
              <p>Limit the given jQuery collection to just <code>&lt;img&gt;</code> tags with <code>src</code> attribute
and dimensions defined.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            applicable= t.filter(_img_).unreel().filter(<span class="keyword">function</span>(){
              <span class="keyword">var</span>
                $<span class="keyword">this</span>= $(<span class="keyword">this</span>),
                attr= opt.attr,
                src= attr.src || $<span class="keyword">this</span>.attr(_src_),
                width= attr.width || $<span class="keyword">this</span>.attr(_height_) || $<span class="keyword">this</span>.width(),
                height= attr.height || $<span class="keyword">this</span>.attr(_width_) || $<span class="keyword">this</span>.height()
              <span class="keyword">if</span> (!src) <span class="keyword">return</span> error(<span class="string">'`src` attribute missing on target image'</span>);
              <span class="keyword">if</span> (!width || !height) <span class="keyword">return</span> error(<span class="string">'Dimension(s) of the target image unknown'</span>);
              <span class="keyword">return</span> <span class="literal">true</span>;
            }),
            instances= []

          applicable.each(<span class="keyword">function</span>(){
            <span class="keyword">var</span>
              t= $(<span class="keyword">this</span>),</pre></div></div>
            
        </li>
        
        
        <li id='section-121'>
            <div class="annotation">
              
              <p>Quick data interface</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              set= <span class="keyword">function</span>(name, value){ <span class="keyword">return</span> t.reel(name, value) &amp;&amp; get(name) },
              get= <span class="keyword">function</span>(name){ <span class="keyword">return</span> t.data(name) },

              on= {</pre></div></div>
            
        </li>
        
        
        <li id='section-122'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Initialization'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Initialization">&#182;</a>
                </div>
              
              <h2>Initialization</h2>

            </div>
            
        </li>
        
        
        <li id='section-124'>
            <div class="annotation">
              
              <p>This internally called private pseudo-handler:</p>
<ul>
<li>initiates all data store keys,</li>
<li>binds to ticker</li>
<li>and triggers <code>&quot;setup&quot;</code> Event when finished.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                setup: <span class="keyword">function</span>(e){
                  <span class="keyword">if</span> (t.hasClass(klass) &amp;&amp; t.parent().hasClass(overlay_klass)) <span class="keyword">return</span>;
                  set(_options_, opt);
                  <span class="keyword">var</span>
                    attr= {
                      src: t.attr(_src_),
                      width: t.attr(_width_) || <span class="literal">null</span>,
                      height: t.attr(_height_) || <span class="literal">null</span>,
                      style: t.attr(_style_) || <span class="literal">null</span>,
                      <span class="string">'class'</span>: t.attr(_class_) || <span class="literal">null</span>
                    },
                    src= t.attr(opt.attr).attr(_src_),
                    id= set(_id_, t.attr(_id_) || t.attr(_id_, klass+<span class="string">'-'</span>+(+<span class="keyword">new</span> Date())).attr(_id_)),
                    data= $.extend({}, t.data()),
                    images= set(_images_, opt.images || []),
                    stitched= set(_stitched_, opt.stitched),
                    is_sprite= !images.length || stitched,
                    responsive= set(_responsive_, opt.responsive &amp;&amp; (knows_background_size ? <span class="literal">true</span> : !is_sprite)),
                    truescale= set(_truescale_, {}),
                    loops= opt.loops,
                    orbital= opt.orbital,
                    revolution= opt.revolution,
                    rows= opt.rows,
                    footage= set(_footage_, min(opt.footage, opt.frames)),
                    spacing= set(_spacing_, opt.spacing),
                    width= set(_width_, +t.attr(_width_) || t.width()),
                    height= set(_height_, +t.attr(_height_) || t.height()),
                    shy= set(_shy_, opt.shy),
                    frames= set(_frames_, orbital &amp;&amp; footage || rows &lt;= <span class="number">1</span> &amp;&amp; images.length || opt.frames),
                    multirow= rows &gt; <span class="number">1</span> || orbital,
                    revolution_x= set(_revolution_, axis(<span class="string">'x'</span>, revolution) || stitched / <span class="number">2</span> || width * <span class="number">2</span>),
                    revolution_y= set(_revolution_y_, !multirow ? <span class="number">0</span> : (axis(<span class="string">'y'</span>, revolution) || (rows &gt; <span class="number">3</span> ? height : height / (<span class="number">5</span> - rows)))),
                    rows= stitched ? <span class="number">1</span> : ceil(frames / footage),
                    stitched_travel= set(_stitched_travel_, stitched - (loops ? <span class="number">0</span> : width)),
                    stitched_shift= set(_stitched_shift_, <span class="number">0</span>),
                    stage_id= hash(id+opt.suffix),
                    img_class= t.attr(_class_),
                    classes= !img_class ? __ : img_class+___,
                    $overlay= $(tag(_div_), { id: stage_id.substr(<span class="number">1</span>), <span class="string">'class'</span>: classes+___+overlay_klass+___+frame_klass+<span class="string">'0'</span> }),
                    $instance= t.wrap($overlay.addClass(opt.klass)).addClass(klass),
                    instances_count= instances.push(add_instance($instance)[<span class="number">0</span>]),
                    $overlay= $instance.parent().bind(on.instance)
                  set(_image_, images.length ? __ : opt.image || src.replace(reel.re.image, <span class="string">'$1'</span> + opt.suffix + <span class="string">'.$2'</span>));
                  set(_cache_, $(tag(_div_), { <span class="string">'class'</span>: cache_klass }).appendTo(<span class="string">'body'</span>));
                  set(_area_, $()),
                  set(_cached_, []);
                  set(_frame_, <span class="literal">null</span>);
                  set(_fraction_, <span class="literal">null</span>);
                  set(_row_, opt.row);
                  set(_tier_, <span class="number">0</span>);
                  set(_rows_, rows);
                  set(_rowlock_, opt.rowlock);
                  set(_framelock_, opt.framelock);
                  set(_departure_, set(_destination_, set(_distance_, <span class="number">0</span>)));
                  set(_bit_, <span class="number">1</span> / frames);
                  set(_stage_, stage_id);
                  set(_backwards_, set(_speed_, opt.speed) &lt; <span class="number">0</span>);
                  set(_loading_, <span class="literal">false</span>);
                  set(_velocity_, <span class="number">0</span>);
                  set(_vertical_, opt.vertical);
                  set(_preloaded_, <span class="number">0</span>);
                  set(_cwish_, negative_when(<span class="number">1</span>, !opt.cw &amp;&amp; !stitched));
                  set(_clicked_location_, {});
                  set(_clicked_, <span class="literal">false</span>);
                  set(_clicked_on_, set(_clicked_tier_, <span class="number">0</span>));
                  set(_lo_, set(_hi_, <span class="number">0</span>));
                  set(_reeling_, <span class="literal">false</span>);
                  set(_reeled_, <span class="literal">false</span>);
                  set(_opening_, <span class="literal">false</span>);
                  set(_brake_, opt.brake);
                  set(_center_, !!orbital);
                  set(_tempo_, opt.tempo / (reel.lazy? opt.laziness : <span class="number">1</span>));
                  set(_opening_ticks_, -<span class="number">1</span>);
                  set(_ticks_, -<span class="number">1</span>);
                  set(_annotations_, opt.annotations || $overlay.unbind(dot(_annotations_)) &amp;&amp; {});
                  set(_ratio_, <span class="number">1</span>);
                  set(_backup_, {
                    attr: attr,
                    data: data
                  });
                  opt.steppable || $overlay.unbind(<span class="string">'up.steppable'</span>);
                  opt.indicator || $overlay.unbind(<span class="string">'.indicator'</span>);
                  css(__, { overflow: _hidden_, position: <span class="string">'relative'</span> });
                  responsive || css(__, { width: width, height: height });
                  responsive &amp;&amp; $.each(responsive_keys, <span class="keyword">function</span>(i, key){ truescale[key]= get(key) });
                  css(____+___+dot(klass), { display: _block_ });
                  css(dot(cache_klass), { position: <span class="string">'fixed'</span>, left: px(-<span class="number">100</span>), top: px(-<span class="number">100</span>) }, <span class="literal">true</span>);
                  css(dot(cache_klass)+___+_img_, { position: _absolute_, width: <span class="number">10</span>, height: <span class="number">10</span> }, <span class="literal">true</span>);
                  pool.bind(on.pool);
                  t.trigger(shy ? <span class="string">'prepare'</span> : <span class="string">'setup'</span>)
                },</pre></div></div>
            
        </li>
        
        
        <li id='section-125'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Events'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Events">&#182;</a>
                </div>
              
              <h2>Events</h2>

            </div>
            
        </li>
        
        
        <li id='section-127'>
            <div class="annotation">
              
              <p>Reel is completely event-driven meaning there are many events, which can be called
(triggered). By binding event handler to any of the events you can easily hook on to any
event to inject your custom behavior where and when this event was triggered.</p>
<p><em><strong>Example:</strong> Make <code>#image</code> element reel and execute some code right after the newly
created instance is initialized and completely loaded:</em></p>
<pre><code>$(&quot;#image&quot;)
.reel()
.bind(&quot;loaded&quot;, function(ev){
  // Your code
})</code></pre>
<p>Events bound to all individual instances.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                instance: {</pre></div></div>
            
        </li>
        
        
        <li id='teardown-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#teardown-Event">&#182;</a>
                </div>
              
              <h3><code>teardown</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p>This event does do how it sounds like. It will teardown an instance with all its
belongings leaving no trace.</p>
<ul>
<li>It reconstructs the original <code>&lt;img&gt;</code> element,</li>
<li>wipes out the data store,</li>
<li>removes instance stylesheet</li>
<li>and unbinds all its events.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  teardown: <span class="keyword">function</span>(e){
                    <span class="keyword">var</span>
                      backup= t.data(_backup_)
                    t.parent().unbind(on.instance);
                    <span class="keyword">if</span> (get(_shy_)) t.parent().unbind(_click_, shy_setup)
                    <span class="keyword">else</span> get(_style_).remove() &amp;&amp; get(_area_).unbind(ns);
                    get(_cache_).empty();
                    clearTimeout(delay);
                    clearTimeout(gauge_delay);
                    $(window).unbind(_resize_, slow_gauge);
                    $(window).unbind(ns);
                    pool.unbind(on.pool);
                    pools.unbind(pns);
                    t.siblings().unbind(ns).remove();
                    no_bias();
                    t.removeAttr(<span class="string">'onloaded'</span>);
                    remove_instance(t.unbind(ns).removeData().unwrap().attr(backup.attr).data(backup.data));
                    t.attr(_style_) == __ &amp;&amp; t.removeAttr(_style_);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='setup-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#setup-Event">&#182;</a>
                </div>
              
              <h3><code>setup</code> Event</h3>
<p><code>Event</code>, since 1.0</p>
<p><code>&quot;setup&quot;</code> Event continues with what has been started by the private <code>on.setup()</code>
handler.</p>
<ul>
<li>It prepares all additional on-stage DOM elements</li>
<li>and cursors for the instance stylesheet.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  setup: <span class="keyword">function</span>(e){
                    <span class="keyword">var</span>
                      $overlay= t.parent().append(preloader()),
                      $area= set(_area_, $(opt.area || $overlay )),
                      multirow= opt.rows &gt; <span class="number">1</span>,
                      cursor= opt.cursor,
                      cursor_up= cursor == _hand_ ? drag_cursor : cursor || reel_cursor,
                      cursor_down= cursor == _hand_ ? drag_cursor_down+___+<span class="string">'!important'</span> : <span class="literal">undefined</span>
                    css(___+dot(klass), { MozUserSelect: _none_, WebkitUserSelect: _none_, MozTransform: <span class="string">'translateZ(0)'</span> });
                    t.unbind(_click_, shy_setup);
                    $area
                      .bind(_touchstart_, press)
                      .bind(opt.clickfree ? _mouseenter_ : _mousedown_, press)
                      .bind(opt.wheelable ? _mousewheel_ : <span class="literal">null</span>, wheel)
                      .bind(_dragstart_, <span class="keyword">function</span>(){ <span class="keyword">return</span> <span class="literal">false</span> })
                    css(__, { cursor: cdn(cursor_up) });
                    css(dot(loading_klass), { cursor: <span class="string">'wait'</span> });
                    css(dot(panning_klass)+____+dot(panning_klass)+<span class="string">' *'</span>, { cursor: cdn(cursor_down || cursor_up) }, <span class="literal">true</span>);
                    <span class="keyword">if</span> (get(_responsive_)){
                      css(___+dot(klass), { width: <span class="string">'100%'</span>, height: _auto_ });
                      $(window).bind(_resize_, slow_gauge);
                    }
                    <span class="function"><span class="keyword">function</span> <span class="title">press</span><span class="params">(e)</span>{</span> <span class="keyword">return</span> t.trigger(<span class="string">'down'</span>, [pointer(e).clientX, pointer(e).clientY, e]) &amp;&amp; e.give }
                    <span class="function"><span class="keyword">function</span> <span class="title">wheel</span><span class="params">(e, delta)</span>{</span> <span class="keyword">return</span> !delta || t.trigger(<span class="string">'wheel'</span>, [delta, e]) &amp;&amp; e.give }
                    opt.hint &amp;&amp; $area.attr(<span class="string">'title'</span>, opt.hint);
                    opt.indicator &amp;&amp; $overlay.append(indicator(<span class="string">'x'</span>));
                    multirow &amp;&amp; opt.indicator &amp;&amp; $overlay.append(indicator(<span class="string">'y'</span>));
                    opt.monitor &amp;&amp; $overlay.append($monitor= $(tag(_div_), { <span class="string">'class'</span>: monitor_klass }))
                                &amp;&amp; css(___+dot(monitor_klass), { position: _absolute_, left: <span class="number">0</span>, top: <span class="number">0</span> });
                  },</pre></div></div>
            
        </li>
        
        
        <li id='preload-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#preload-Event">&#182;</a>
                </div>
              
              <h3><code>preload</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p>Reel keeps a cache of all images it needs for its operation. Either a sprite or all
sequence images. It first determines the order of requesting the images and then
asynchronously loads all of them.</p>
<ul>
<li>It preloads all frames and sprites.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  preload: <span class="keyword">function</span>(e){
                    <span class="keyword">var</span>
                      $overlay= t.parent(),
                      images= get(_images_),
                      is_sprite= !images.length,
                      order= reel.preload[opt.preload] || reel.preload[reel.def.preload],
                      preload= is_sprite ? [get(_image_)] : order(images.slice(<span class="number">0</span>), opt, get),
                      to_load= preload.length,
                      preloaded= set(_preloaded_, is_sprite ? <span class="number">0.5</span> : <span class="number">0</span>),
                      simultaneous= <span class="number">0</span>,
                      $cache= get(_cache_).empty(),
                      uris= []
                    $overlay.addClass(loading_klass);</pre></div></div>
            
        </li>
        
        
        <li id='section-131'>
            <div class="annotation">
              
              <p>It also finalizes the instance stylesheet and prepends it to the head.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    set(_style_, get(_style_) || $(<span class="string">'&lt;'</span>+_style_+<span class="string">' type="text/css"&gt;'</span>+css.rules.join(<span class="string">'\n'</span>)+<span class="string">'&lt;/'</span>+_style_+<span class="string">'&gt;'</span>).prependTo(_head_));
                    set(_loading_, <span class="literal">true</span>);
                    t.trigger(<span class="string">'stop'</span>);
                    opt.responsive &amp;&amp; gauge();
                    t.trigger(<span class="string">'resize'</span>, <span class="literal">true</span>);
                    <span class="keyword">while</span>(preload.length){
                      <span class="keyword">var</span>
                        uri= reel.substitute(opt.path+preload.shift(), get),
                        $img= $(tag(_img_)).data(_src_, uri).appendTo($cache)</pre></div></div>
            
        </li>
        
        
        <li id='section-132'>
            <div class="annotation">
              
              <p>Each image, which finishes the load triggers <code>&quot;preloaded&quot;</code> Event.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                      $img.bind(<span class="string">'load error abort'</span>, <span class="keyword">function</span>(e){
                        e.type != <span class="string">'load'</span> &amp;&amp; t.trigger(e.type);
                        <span class="keyword">return</span> !detached($overlay) &amp;&amp; t.trigger(<span class="string">'preloaded'</span>) &amp;&amp; load() &amp;&amp; <span class="literal">false</span>;
                      });
                      uris.push(uri);
                    }
                    setTimeout(<span class="keyword">function</span>(){ <span class="keyword">while</span> (++simultaneous &lt; reel.concurrent_requests) load(); }, <span class="number">0</span>);
                    set(_cached_, uris);
                    set(_shy_, <span class="literal">false</span>);
                    <span class="function"><span class="keyword">function</span> <span class="title">load</span><span class="params">()</span>{</span>
                      <span class="keyword">var</span>
                        $img= $cache.children(<span class="string">':not([src]):first'</span>)
                      <span class="keyword">return</span> $img.attr(_src_, $img.data(_src_))
                    }
                  },</pre></div></div>
            
        </li>
        
        
        <li id='preloaded-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#preloaded-Event">&#182;</a>
                </div>
              
              <h3><code>preloaded</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p>This event is fired by every preloaded image and adjusts the preloader indicator&#39;s
target position. Once all images are preloaded, <code>&quot;loaded&quot;</code> Event is triggered.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  preloaded: <span class="keyword">function</span>(e){
                    <span class="keyword">var</span>
                      images= get(_images_).length || <span class="number">1</span>,
                      preloaded= set(_preloaded_, min(get(_preloaded_) + <span class="number">1</span>, images))
                    <span class="keyword">if</span> (preloaded === <span class="number">1</span>) <span class="keyword">var</span>
                      frame= t.trigger(<span class="string">'frameChange'</span>, [<span class="literal">undefined</span>, get(_frame_)])
                    <span class="keyword">if</span> (preloaded === images){
                      t.parent().removeClass(loading_klass);
                      t.trigger(<span class="string">'loaded'</span>);
                    }
                  },</pre></div></div>
            
        </li>
        
        
        <li id='loaded-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#loaded-Event">&#182;</a>
                </div>
              
              <h3><code>loaded</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p><code>&quot;loaded&quot;</code> Event is the one announcing when the instance is &quot;locked and loaded&quot;.
At this time, all is prepared, preloaded and configured for user interaction
or animation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  loaded: <span class="keyword">function</span>(e){
                    get(_images_).length &gt; <span class="number">1</span> || t.css({ backgroundImage: url(reel.substitute(opt.path+get(_image_), get)) }).attr({ src: cdn(transparent) });
                    get(_stitched_) &amp;&amp; t.attr({ src: cdn(transparent) });
                    get(_reeled_) || set(_velocity_, opt.velocity || <span class="number">0</span>);
                    set(_loading_, <span class="literal">false</span>);
                    loaded= <span class="literal">true</span>;
                  },</pre></div></div>
            
        </li>
        
        
        <li id='prepare-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#prepare-Event">&#182;</a>
                </div>
              
              <h3><code>prepare</code> Event</h3>
<p>[NEW] <code>Event</code>, since 1.3</p>
<p>In case of <code>shy</code> activation, <code>&quot;prepare&quot;</code> event is called instead of the full <code>&quot;setup&quot;</code>.
It lefts the target image untouched waiting to be clicked to actually setup.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  prepare: <span class="keyword">function</span>(e){
                    t.css(<span class="string">'display'</span>, _block_).parent().one(_click_, shy_setup);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-136'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Animation-Events'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Animation-Events">&#182;</a>
                </div>
              
              <h2>Animation Events</h2>

            </div>
            
        </li>
        
        
        <li id='opening-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#opening-Event">&#182;</a>
                </div>
              
              <h3><code>opening</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p>When <a href="#Opening-Animation">opening animation</a> is configured for the instance, <code>&quot;opening&quot;</code>
event engages the animation by pre-calculating some of its properties, which will make
the tick handler</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  opening: <span class="keyword">function</span>(e){
                  <span class="comment">/*
                  - initiates opening animation
                  - or simply plays the reel when without opening
                  */</span>
                    <span class="keyword">if</span> (!opt.opening) <span class="keyword">return</span> t.trigger(<span class="string">'openingDone'</span>);
                    <span class="keyword">var</span>
                      opening= set(_opening_, <span class="literal">true</span>),
                      stopped= set(_stopped_, !get(_speed_)),
                      speed= opt.entry || opt.speed,
                      end= get(_fraction_),
                      duration= opt.opening,
                      start= set(_fraction_, end - speed * duration),
                      ticks= set(_opening_ticks_, ceil(duration * leader(_tempo_)))
                  },</pre></div></div>
            
        </li>
        
        
        <li id='openingDone-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#openingDone-Event">&#182;</a>
                </div>
              
              <h3><code>openingDone</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p><code>&quot;openingDone&quot;</code> is fired onceWhen <a href="#Opening-Animation">opening animation</a> is configured for the instance, <code>&quot;opening&quot;</code>
event engages the animation by pre-calculating some of its properties, which will make
the tick handler</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  openingDone: <span class="keyword">function</span>(e){
                    <span class="keyword">var</span>
                      playing= set(_playing_, <span class="literal">false</span>),
                      opening= set(_opening_, <span class="literal">false</span>),
                      evnt= _tick_+dot(_opening_)
                    pool.unbind(evnt, on.pool[evnt]);
                    opt.orientable &amp;&amp; $(window).bind(_deviceorientation_, orient);
                    <span class="keyword">if</span> (opt.delay &gt; <span class="number">0</span>) delay= setTimeout(<span class="keyword">function</span>(){ t.trigger(<span class="string">'play'</span>) }, opt.delay * <span class="number">1000</span>)
                    <span class="keyword">else</span> t.trigger(<span class="string">'play'</span>);
                    <span class="function"><span class="keyword">function</span> <span class="title">orient</span><span class="params">(e)</span>{</span> <span class="keyword">return</span> t.trigger(<span class="string">'orient'</span>, [gyro(e).alpha, gyro(e).beta, gyro(e).gamma, e]) &amp;&amp; e.give }
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-140'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Playback-Control-Events'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Playback-Control-Events">&#182;</a>
                </div>
              
              <h2>Playback Control Events</h2>

            </div>
            
        </li>
        
        
        <li id='play-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#play-Event">&#182;</a>
                </div>
              
              <h3><code>play</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p><code>&quot;play&quot;</code> event can optionally accept a <code>speed</code> parameter (in Hz) to change the animation
speed on the fly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  play: <span class="keyword">function</span>(e, speed){
                    <span class="keyword">var</span>
                      speed= speed ? set(_speed_, speed) : (get(_speed_) * negative_when(<span class="number">1</span>, get(_backwards_))),
                      duration= opt.duration,
                      ticks= duration &amp;&amp; set(_ticks_, ceil(duration * leader(_tempo_))),
                      backwards= set(_backwards_, speed &lt; <span class="number">0</span>),
                      playing= set(_playing_, !!speed),
                      stopped= set(_stopped_, !playing)
                    idle();
                  },</pre></div></div>
            
        </li>
        
        
        <li id='reach-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reach-Event">&#182;</a>
                </div>
              
              <h3><code>reach</code> Event</h3>
<p>[NEW] <code>Event</code>, since 1.3</p>
<p>Use this event to instruct Reel to play and reach a given frame. <code>&quot;reach&quot;</code> event requires
<code>target</code> parameter, which is the frame to which Reel should animate to and stop.
Optional <code>speed</code> parameter allows for custom speed independent on the regular speed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  reach: <span class="keyword">function</span>(e, target, speed){
                    <span class="keyword">if</span> (target == get(_frame_)) <span class="keyword">return</span>;
                    <span class="keyword">var</span>
                      frames= get(_frames_),
                      row= set(_row_, ceil(target / frames)),
                      departure= set(_departure_, get(_frame_)),
                      target= set(_destination_, target),
                      shortest = set(_distance_, reel.math.distance(departure, target, frames)),
                      speed= abs(speed || get(_speed_)) * negative_when(<span class="number">1</span>, shortest &lt; <span class="number">0</span>)
                    t.trigger(<span class="string">'play'</span>, speed);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='pause-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#pause-Event">&#182;</a>
                </div>
              
              <h3><code>pause</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p>Triggering <code>&quot;pause&quot;</code> event will halt the playback for a time period designated
by the <code>timeout</code> option. After this timenout, the playback is resumed again.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  pause: <span class="keyword">function</span>(e){
                    unidle();
                  },</pre></div></div>
            
        </li>
        
        
        <li id='stop-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#stop-Event">&#182;</a>
                </div>
              
              <h3><code>stop</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p>After <code>&quot;stop&quot;</code> event is triggered, the playback stops and stays still until <code>&quot;play&quot;</code>ed again.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  stop: <span class="keyword">function</span>(e){
                    <span class="keyword">var</span>
                      stopped= set(_stopped_, <span class="literal">true</span>),
                      playing= set(_playing_, !stopped)
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-146'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Human-Interaction-Events'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Human-Interaction-Events">&#182;</a>
                </div>
              
              <h2>Human Interaction Events</h2>

            </div>
            
        </li>
        
        
        <li id='down-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#down-Event">&#182;</a>
                </div>
              
              <h3><code>down</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p>Marks the very beginning of touch or mouse interaction. It receives <code>x</code> and <code>y</code>
coordinates in arguments.</p>
<ul>
<li>It calibrates the center point (origin),</li>
<li>considers user active not idle,</li>
<li>flags the <code>&lt;html&gt;</code> tag with <code>.reel-panning</code> class name</li>
<li>and binds dragging events for move and lift. These
are usually bound to the pool (document itself) to get a consistent treating regardless
the event target element. However in click-free mode, it binds directly to the instance.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  down: <span class="keyword">function</span>(e, x, y, ev){
                    <span class="keyword">if</span> (!opt.clickfree &amp;&amp; ev &amp;&amp; ev.button !== <span class="literal">undefined</span> &amp;&amp; ev.button != DRAG_BUTTON) <span class="keyword">return</span>;
                    <span class="keyword">if</span> (opt.draggable){
                      <span class="keyword">var</span>
                        clicked= set(_clicked_, get(_frame_)),
                        clickfree= opt.clickfree,
                        velocity= set(_velocity_, <span class="number">0</span>),
                        $area= clickfree ? get(_area_) : pools,
                        origin= last= recenter_mouse(get(_revolution_), x, y)
                      unidle();
                      no_bias();
                      panned= <span class="number">0</span>;
                      $(_html_, pools).addClass(panning_klass);
                      $area
                        .bind(_touchmove_+___+_mousemove_, drag)
                        .bind(_touchend_+___+_touchcancel_, lift)
                        .bind(clickfree ? _mouseleave_ : _mouseup_, lift)
                    }
                    <span class="function"><span class="keyword">function</span> <span class="title">drag</span><span class="params">(e)</span>{</span> <span class="keyword">return</span> t.trigger(<span class="string">'pan'</span>, [pointer(e).clientX, pointer(e).clientY, e]) &amp;&amp; e.give }
                    <span class="function"><span class="keyword">function</span> <span class="title">lift</span><span class="params">(e)</span>{</span> <span class="keyword">return</span> t.trigger(<span class="string">'up'</span>, [e]) &amp;&amp; e.give }
                  },</pre></div></div>
            
        </li>
        
        
        <li id='up-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#up-Event">&#182;</a>
                </div>
              
              <h3><code>up</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p>This marks the termination of user&#39;s interaction. She either released the mouse button
or lift the finger of the touch screen. This event handler:</p>
<ul>
<li>calculates the velocity of the drag at that very moment,</li>
<li>removes the <code>.reel-panning</code> class from <code>&lt;body&gt;</code></li>
<li>and unbinds dragging events from the pool.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  up: <span class="keyword">function</span>(e, ev){
                    <span class="keyword">var</span>
                      clicked= set(_clicked_, <span class="literal">false</span>),
                      reeling= set(_reeling_, <span class="literal">false</span>),
                      throwable = opt.throwable,
                      biases= abs(bias[<span class="number">0</span>] + bias[<span class="number">1</span>]) / <span class="number">60</span>,
                      velocity= set(_velocity_, !throwable ? <span class="number">0</span> : throwable === <span class="literal">true</span> ? biases : min(throwable, biases)),
                      brakes= braking= velocity ? <span class="number">1</span> : <span class="number">0</span>
                    unidle();
                    no_bias();
                    $(_html_, pools).removeClass(panning_klass);
                    (opt.clickfree ? get(_area_) : pools).unbind(pns);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='pan-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#pan-Event">&#182;</a>
                </div>
              
              <h3><code>pan</code> Event</h3>
<p>[RENAMED] <code>Event</code>, since 1.2</p>
<p>Regardles the actual source of movement (mouse or touch), this event is always triggered
in response and similar to the <code>&quot;down&quot;</code> Event it receives <code>x</code> and <code>y</code> coordinates
in arguments and in addition it is passed a reference to the original browser event.
This handler:</p>
<ul>
<li>syncs with timer to achieve good performance,</li>
<li>calculates the distance from drag center and applies graph on it to get <code>fraction</code>,</li>
<li>recenters the drag when dragged over limits,</li>
<li>detects the direction of the motion</li>
<li>and builds up inertial motion bias.</li>
</ul>
<p>Historically <code>pan</code> was once called <code>slide</code> (conflicted with Mootools - <a href="https://github.com/pisi/Reel/issues/51">GH-51</a>)
or <code>drag</code> (that conflicted with MSIE).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  pan: <span class="keyword">function</span>(e, x, y, ev){
                    <span class="keyword">if</span> (opt.draggable &amp;&amp; slidable){
                      slidable= <span class="literal">false</span>;
                      unidle();
                      <span class="keyword">var</span>
                        rows= opt.rows,
                        orbital= opt.orbital,
                        scrollable= !get(_reeling_) &amp;&amp; rows &lt;= <span class="number">1</span> &amp;&amp; !orbital &amp;&amp; opt.scrollable,
                        delta= { x: x - last.x, y: y - last.y },
                        abs_delta= { x: abs(delta.x), y: abs(delta.y) }
                      <span class="keyword">if</span> (ev &amp;&amp; scrollable &amp;&amp; abs_delta.x &lt; abs_delta.y) <span class="keyword">return</span> ev.give = <span class="literal">true</span>;
                      <span class="keyword">if</span> (abs_delta.x &gt; <span class="number">0</span> || abs_delta.y &gt; <span class="number">0</span>){
                        ev &amp;&amp; (ev.give = <span class="literal">false</span>);
                        panned= max(abs_delta.x, abs_delta.y);
                        last= { x: x, y: y };
                        <span class="keyword">var</span>
                          revolution= get(_revolution_),
                          origin= get(_clicked_location_),
                          vertical= get(_vertical_)
                        <span class="keyword">if</span> (!get(_framelock_)) <span class="keyword">var</span>
                          fraction= set(_fraction_, graph(vertical ? y - origin.y : x - origin.x, get(_clicked_on_), revolution, get(_lo_), get(_hi_), get(_cwish_), vertical ? y - origin.y : x - origin.x)),
                          reeling= set(_reeling_, get(_reeling_) || get(_frame_) != get(_clicked_)),
                          motion= to_bias(vertical ? delta.y : delta.x || <span class="number">0</span>),
                          backwards= motion &amp;&amp; set(_backwards_, motion &lt; <span class="number">0</span>)
                        <span class="keyword">if</span> (orbital &amp;&amp; get(_center_)) <span class="keyword">var</span>
                          vertical= set(_vertical_, abs(y - origin.y) &gt; abs(x - origin.x)),
                          origin= recenter_mouse(revolution, x, y)
                        <span class="keyword">if</span> (rows &gt; <span class="number">1</span> &amp;&amp; !get(_rowlock_)) <span class="keyword">var</span>
                          revolution_y= get(_revolution_y_),
                          start= get(_clicked_tier_),
                          lo= - start * revolution_y,
                          tier= set(_tier_, reel.math.envelope(y - origin.y, start, revolution_y, lo, lo + revolution_y, -<span class="number">1</span>))
                        <span class="keyword">if</span> (!(fraction % <span class="number">1</span>) &amp;&amp; !opt.loops) <span class="keyword">var</span>
                          origin= recenter_mouse(revolution, x, y)
                      }
                    }
                  },</pre></div></div>
            
        </li>
        
        
        <li id='wheel-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#wheel-Event">&#182;</a>
                </div>
              
              <h3><code>wheel</code> Event</h3>
<p><code>Event</code>, since 1.0</p>
<p>Maps Reel to mouse wheel position change event which is provided by a nifty plug-in
written by Brandon Aaron - the <a href="https://github.com/brandonaaron/jquery-mousewheel">Mousewheel plug-in</a>, which you will need to enable
the mousewheel wheel for reeling. You can also choose to use <a href="http://blog.threedubmedia.com/2008/08/eventspecialwheel.html">Wheel Special Event
plug-in</a> by Three Dub Media instead. Either way <code>&quot;wheel&quot;</code> Event handler receives
the positive or negative wheeled distance in arguments. This event:</p>
<ul>
<li>calculates wheel input delta and adjusts the <code>fraction</code> using the graph,</li>
<li>recenters the &quot;drag&quot; each and every time,</li>
<li>detects motion direction</li>
<li>and nullifies the velocity.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  wheel: <span class="keyword">function</span>(e, distance, ev){
                    <span class="keyword">if</span> (!distance) <span class="keyword">return</span>;
                    wheeled= <span class="literal">true</span>;
                    <span class="keyword">var</span>
                      delta= ceil(math.sqrt(abs(distance)) / <span class="number">2</span>),
                      delta= negative_when(delta, distance &gt; <span class="number">0</span>),
                      revolution= <span class="number">0.0833</span> * get(_revolution_), <span class="comment">// Wheel's revolution is 1/12 of full revolution</span>
                      origin= recenter_mouse(revolution),
                      backwards= delta &amp;&amp; set(_backwards_, delta &lt; <span class="number">0</span>),
                      velocity= set(_velocity_, <span class="number">0</span>),
                      fraction= set(_fraction_, graph(delta, get(_clicked_on_), revolution, get(_lo_), get(_hi_), get(_cwish_)))
                    ev &amp;&amp; ev.preventDefault();
                    ev &amp;&amp; (ev.give = <span class="literal">false</span>);
                    unidle();
                    t.trigger(<span class="string">'up'</span>, [ev]);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='orient-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#orient-Event">&#182;</a>
                </div>
              
              <h3><code>orient</code> Event</h3>
<p>[NEW] <code>Event</code>, since 1.3</p>
<p>Maps Reel to device orientation event which is provided by some touch enabled devices
with gyroscope inside. Event handler receives all three device orientation angles 
in arguments. This event:</p>
<ul>
<li>maps alpha angle directly to <code>fraction</code></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  orient: <span class="keyword">function</span>(e, alpha, beta, gamma, ev){
                    <span class="keyword">if</span> (!slidable || operated) <span class="keyword">return</span>;
                    oriented= <span class="literal">true</span>;
                    <span class="keyword">var</span>
                      alpha_fraction= alpha / <span class="number">360</span>
                      fraction= set(_fraction_, +((opt.stitched || opt.cw ? <span class="number">1</span> - alpha_fraction : alpha_fraction)).toFixed(<span class="number">2</span>))
                    slidable = <span class="literal">false</span>;
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-153'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Data-Change-Events'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Data-Change-Events">&#182;</a>
                </div>
              
              <h2>Data Change Events</h2>

            </div>
            
        </li>
        
        
        <li id='section-155'>
            <div class="annotation">
              
              <p>Besides Reel being event-driven, it also is data-driven respectively data-change-driven
meaning that there is a mechanism in place, which detects real changes in data being
stored with <code>.reel(name, value)</code>. Learn more about <a href="#Changes">data changes</a>.</p>
<p>These data change bindings are for internal use only and you don&#39;t ever trigger them
per se, you change data and that will trigger respective change event. If the value
being stored is the same as the one already stored, nothing will be triggered.</p>
<p><em><strong>Example:</strong> Change Reel&#39;s current <code>frame</code>:</em></p>
<pre><code>.reel(&quot;frame&quot;, 15)</code></pre>
<p>Change events always receive the actual data key value in the third argument.</p>
<p><em><strong>Example:</strong> Log each viewed frame number into the developers console:</em></p>
<pre><code>.bind(&quot;frameChange&quot;, function(e, d, frame){
    console.log(frame)
})</code></pre>
<hr>

            </div>
            
        </li>
        
        
        <li id='fractionChange-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#fractionChange-Event">&#182;</a>
                </div>
              
              <h3><code>fractionChange</code> Event</h3>
<p><code>Event</code>, since 1.0</p>
<p>Internally Reel doesn&#39;t really work with the frames you set it up with. It uses
<strong>fraction</strong>, which is a numeric value ranging from 0.0 to 1.0. When <code>fraction</code> changes
this handler basically calculates and sets new value of <code>frame</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  fractionChange: <span class="keyword">function</span>(e, nil, fraction){
                    <span class="keyword">if</span> (nil !== <span class="literal">undefined</span>) <span class="keyword">return</span>;
                    <span class="keyword">var</span>
                      frame= <span class="number">1</span> + floor(fraction / get(_bit_)),
                      multirow= opt.rows &gt; <span class="number">1</span>,
                      orbital= opt.orbital,
                      center= set(_center_, !!orbital &amp;&amp; (frame &lt;= orbital || frame &gt;= get(_footage_) - orbital + <span class="number">2</span>))
                    <span class="keyword">if</span> (multirow) <span class="keyword">var</span>
                      frame= frame + (get(_row_) - <span class="number">1</span>) * get(_frames_)
                    <span class="keyword">var</span>
                      frame= set(_frame_, frame)
                  },</pre></div></div>
            
        </li>
        
        
        <li id='tierChange-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#tierChange-Event">&#182;</a>
                </div>
              
              <h3><code>tierChange</code> Event</h3>
<p><code>Event</code>, since 1.2</p>
<p>The situation of <code>tier</code> is very much similar to the one of <code>fraction</code>. In multi-row
movies, <strong>tier</strong> is an internal value for the vertical axis. Its value also ranges from
0.0 to 1.0. Handler calculates and sets new value of <code>frame</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  tierChange: <span class="keyword">function</span>(e, nil, tier){
                    <span class="keyword">if</span> (nil === <span class="literal">undefined</span>) <span class="keyword">var</span>
                      row= set(_row_, round(interpolate(tier, <span class="number">1</span>, opt.rows))),
                      frames= get(_frames_),
                      frame= get(_frame_) % frames || frames,
                      frame= set(_frame_, frame + row * frames - frames)
                  },</pre></div></div>
            
        </li>
        
        
        <li id='rowChange-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#rowChange-Event">&#182;</a>
                </div>
              
              <h3><code>rowChange</code> Event</h3>
<p><code>Event</code>, since 1.1</p>
<p>The physical vertical position of Reel is expressed in <strong>rows</strong> and ranges
from 1 to the total number of rows defined with <a href="#rows-Option"><code>rows</code></a>. This handler
only converts <code>row</code> value to <code>tier</code> and sets it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  rowChange: <span class="keyword">function</span>(e, nil, row){
                    <span class="keyword">if</span> (nil === <span class="literal">undefined</span>) <span class="keyword">var</span>
                      tier= may_set(_tier_, <span class="literal">undefined</span>, row, opt.rows)
                  },</pre></div></div>
            
        </li>
        
        
        <li id='frameChange-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#frameChange-Event">&#182;</a>
                </div>
              
              <h3><code>frameChange</code> Event</h3>
<p><code>Event</code>, since 1.0</p>
<p>The physical horizontal position of Reel is expressed in <strong>frames</strong> and ranges
from 1 to the total number of frames configured with <a href="#frames-Option"><code>frames</code></a>.
This handler converts <code>row</code> value to <code>tier</code> and sets it. This default handler:</p>
<ul>
<li>flags the instance&#39;s outter wrapper with <code>.frame-X</code> class name
(where <code>X</code> is the actual frame number),</li>
<li>calculates and eventually sets <code>fraction</code> (and <code>tier</code> for multi-rows) from given frame,</li>
<li>for sequences, it switches the <code>&lt;img&gt;</code>&#39;s <code>src</code> to the right frame</li>
<li>and for sprites it recalculates sprite&#39;s &#39;background position shift and applies it.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  frameChange: <span class="keyword">function</span>(e, nil, frame){
                    <span class="keyword">if</span> (nil !== <span class="literal">undefined</span>) <span class="keyword">return</span>;
                    <span class="keyword">this</span>.className= <span class="keyword">this</span>.className.replace(reel.re.frame_klass, frame_klass + frame);
                    <span class="keyword">var</span>
                      frames= get(_frames_),
                      rows= opt.rows,
                      path= opt.path,
                      base= frame % frames || frames,
                      frame_row= (frame - base) / frames + <span class="number">1</span>,
                      frame_tier= (frame_row - <span class="number">1</span>) / (rows - <span class="number">1</span>),
                      row= get(_row_),
                      tier= !rows ? get(_tier_) : may_set(_tier_, frame_tier, row, rows),
                      fraction= may_set(_fraction_, <span class="literal">undefined</span>, base, frames),
                      footage= get(_footage_)
                    <span class="keyword">if</span> (opt.orbital &amp;&amp; get(_vertical_)) <span class="keyword">var</span>
                      frame= opt.inversed ? footage + <span class="number">1</span> - frame : frame,
                      frame= frame + footage
                    <span class="keyword">var</span>
                      stitched= get(_stitched_),
                      images= get(_images_),
                      is_sprite= !images.length || stitched
                    <span class="keyword">if</span> (!is_sprite){
                      get(_responsive_) &amp;&amp; gauge();
                      get(_preloaded_) &amp;&amp; t.attr({ src: reen(reel.substitute(path + images[frame - <span class="number">1</span>], get)) });
                    }<span class="keyword">else</span>{
                      <span class="keyword">var</span>
                        spacing= get(_spacing_),
                        width= get(_width_),
                        height= get(_height_)
                      <span class="keyword">if</span> (!stitched) <span class="keyword">var</span>
                        horizontal= opt.horizontal,
                        minor= (frame % footage) - <span class="number">1</span>,
                        minor= minor &lt; <span class="number">0</span> ? footage - <span class="number">1</span> : minor,
                        major= floor((frame - <span class="number">0.1</span>) / footage),
                        major= major + (rows &gt; <span class="number">1</span> ? <span class="number">0</span> : (get(_backwards_) ? <span class="number">0</span> : !opt.directional ? <span class="number">0</span> : get(_rows_))),
                        a= major * ((horizontal ? height : width) + spacing),
                        b= minor * ((horizontal ? width : height) + spacing),
                        shift= images.length ? [<span class="number">0</span>, <span class="number">0</span>] : horizontal ? [px(-b), px(-a)] : [px(-a), px(-b)]
                      <span class="keyword">else</span>{
                        <span class="keyword">var</span>
                          x= set(_stitched_shift_, round(interpolate(fraction, <span class="number">0</span>, get(_stitched_travel_))) % stitched),
                          y= rows &lt;= <span class="number">1</span> ? <span class="number">0</span> : (height + spacing) * (rows - row),
                          shift= [px(-x), px(-y)],
                          image= images.length &gt; <span class="number">1</span> &amp;&amp; images[row - <span class="number">1</span>],
                          fullpath= reel.substitute(path + image, get)
                        image &amp;&amp; t.css(<span class="string">'backgroundImage'</span>).search(fullpath) &lt; <span class="number">0</span> &amp;&amp; t.css({ backgroundImage: url(fullpath) })
                      }
                      t.css({ backgroundPosition: shift.join(___) })
                    }
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-160'>
            <div class="annotation">
              
              <p>This extra binding takes care of watching frame position while animating the <code>&quot;reach&quot;</code> event.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'frameChange.reach'</span>: <span class="keyword">function</span>(e, nil, frame){
                    <span class="keyword">if</span> (!get(_destination_) || nil !== <span class="literal">undefined</span>) <span class="keyword">return</span>;
                    <span class="keyword">var</span>
                      travelled= reel.math.distance(get(_departure_), frame, get(_frames_)),
                      onorover= abs(travelled) &gt;= abs(get(_distance_))
                    <span class="keyword">if</span> (!onorover) <span class="keyword">return</span>;
                    set(_frame_, set(_destination_));
                    set(_destination_, set(_distance_, set(_departure_, <span class="number">0</span>)));
                    t.trigger(<span class="string">'stop'</span>);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-161'>
            <div class="annotation">
              
              <p>~~~</p>
<p>When <code>image</code> or <code>images</code> is changed on the fly, this handler resets the loading cache and triggers
new preload sequence. Images are actually switched only after the new image is fully loaded.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'imageChange imagesChange'</span>: <span class="keyword">function</span>(e, nil, image){
                    t.trigger(<span class="string">'preload'</span>);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-162'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Indicator'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Indicator">&#182;</a>
                </div>
              
              <h2>Indicator</h2>

            </div>
            
        </li>
        
        
        <li id='section-164'>
            <div class="annotation">
              
              <p>When configured with the <a href="#indicator-Option"><code>indicator</code></a> option, Reel adds to the scene
a visual indicator in a form of a black rectangle traveling along the bottom edge
of the image. It bears two distinct messages:</p>
<ul>
<li>its horizontal position accurately reflects actual <code>fraction</code></li>
<li>and its width reflect one frame&#39;s share on the whole (more frames mean narrower
indicator).</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'fractionChange.indicator'</span>: <span class="keyword">function</span>(e, nil, fraction){
                    <span class="keyword">if</span> (opt.indicator &amp;&amp; nil === <span class="literal">undefined</span>) <span class="keyword">var</span>
                      size= opt.indicator,
                      orbital= opt.orbital,
                      travel= orbital &amp;&amp; get(_vertical_) ? get(_height_) : get(_width_),
                      slots= orbital ? get(_footage_) : opt.images.length || get(_frames_),
                      weight= ceil(travel / slots),
                      travel= travel - weight,
                      indicate= round(interpolate(fraction, <span class="number">0</span>, travel)),
                      indicate= !opt.cw || get(_stitched_) ? indicate : travel - indicate,
                      $indicator= indicator.$x.css(get(_vertical_)
                      ? { left: <span class="number">0</span>, top: px(indicate), bottom: _auto_, width: size, height: weight }
                      : { bottom: <span class="number">0</span>, left: px(indicate), top: _auto_, width: weight, height: size })
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-165'>
            <div class="annotation">
              
              <p>For multi-row object movies, there&#39;s a second indicator sticked to the left edge
and communicates:</p>
<ul>
<li>its vertical position accurately reflects actual <code>tier</code></li>
<li>and its height reflect one row&#39;s share on the whole (more rows mean narrower
indicator).</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'tierChange.indicator'</span>: <span class="keyword">function</span>(e, nil, tier){
                    <span class="keyword">if</span> (opt.rows &gt; <span class="number">1</span> &amp;&amp; opt.indicator &amp;&amp; nil === <span class="literal">undefined</span>) <span class="keyword">var</span>
                      travel= get(_height_),
                      size= opt.indicator,
                      weight= ceil(travel / opt.rows),
                      travel= travel - weight,
                      indicate= round(tier * travel),
                      $yindicator= indicator.$y.css({ left: <span class="number">0</span>, top: indicate, width: size, height: weight })
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-166'>
            <div class="annotation">
              
              <p>Indicators are bound to <code>fraction</code> or <code>row</code> changes, meaning they alone can consume
more CPU resources than the entire Reel scene. Use them for development only.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='Annotations'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Annotations">&#182;</a>
                </div>
              
              <h2>Annotations</h2>

            </div>
            
        </li>
        
        
        <li id='section-168'>
            <div class="annotation">
              
              <p>If you want to annotate features of your scene to better describe the subject,
there&#39;s annotations for you. Annotations feature allows you to place virtually any
HTML content over or into the image and have its position and visibility synchronized
with the position of Reel. These two easy looking handlers do a lot more than to fit
in here.</p>
<p>Learn more about <a href="https://github.com/pisi/Reel/wiki/Annotations">Annotations</a> in the wiki, where a great care has been taken
to in-depth explain this new exciting functionality.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'setup.annotations'</span>: <span class="keyword">function</span>(e){
                    <span class="keyword">var</span>
                      $overlay= t.parent()
                    $.each(get(_annotations_), <span class="keyword">function</span>(ida, note){
                      <span class="keyword">var</span>
                        $note= <span class="keyword">typeof</span> note.node == _string_ ? $(note.node) : note.node || {},
                        $note= $note.jquery ? $note : $(tag(_div_), $note),
                        $note= $note.attr({ id: ida }).addClass(annotation_klass),
                        $image= note.image ? $(tag(_img_), note.image) : $(),
                        $link= note.link ? $(tag(<span class="string">'a'</span>), note.link).click(<span class="keyword">function</span>(){ t.trigger(<span class="string">'up.annotations'</span>, { target: $link }); }) : $()
                      css(hash(ida), { display: _none_, position: _absolute_ }, <span class="literal">true</span>);
                      note.image || note.link &amp;&amp; $note.append($link);
                      note.link || note.image &amp;&amp; $note.append($image);
                      note.link &amp;&amp; note.image &amp;&amp; $note.append($link.append($image));
                      $note.appendTo($overlay);
                    });
                  },
                  <span class="string">'prepare.annotations'</span>: <span class="keyword">function</span>(e){
                    $.each(get(_annotations_), <span class="keyword">function</span>(ida, note){
                      $(hash(ida)).hide();
                    });
                  },
                  <span class="string">'frameChange.annotations'</span>: <span class="keyword">function</span>(e, nil, frame){
                    <span class="keyword">if</span> (!get(_preloaded_) || nil !== <span class="literal">undefined</span>) <span class="keyword">return</span>;
                    <span class="keyword">var</span>
                      width= get(_width_),
                      stitched= get(_stitched_),
                      ss= get(_stitched_shift_)
                    $.each(get(_annotations_), <span class="keyword">function</span>(ida, note){
                      <span class="keyword">var</span>
                        $note= $(hash(ida)),
                        start= note.start || <span class="number">1</span>,
                        end= note.end,
                        frame= frame || get(_frame_),
                        offset= frame - <span class="number">1</span>,
                        at= note.at ? (note.at[offset] == <span class="string">'+'</span>) : <span class="literal">false</span>,
                        offset= note.at ? offset : offset - start + <span class="number">1</span>,
                        x= <span class="keyword">typeof</span> note.x!=_object_ ? note.x : note.x[offset],
                        y= <span class="keyword">typeof</span> note.y!=_object_ ? note.y : note.y[offset],
                        placed= x !== <span class="literal">undefined</span> &amp;&amp; y !== <span class="literal">undefined</span>,
                        visible= placed &amp;&amp; (note.at ? at : (offset &gt;= <span class="number">0</span> &amp;&amp; (!end || offset &lt;= end - start)))
                      <span class="keyword">if</span> (stitched) <span class="keyword">var</span>
                        on_edge= x &lt; width &amp;&amp; ss &gt; stitched - width,
                        after_edge= x &gt; stitched - width &amp;&amp; ss &gt;= <span class="number">0</span> &amp;&amp; ss &lt; width,
                        x= !on_edge ? x : x + stitched,
                        x= !after_edge ? x : x - stitched,
                        x= x - ss
                      <span class="keyword">if</span> (get(_responsive_)) <span class="keyword">var</span>
                        ratio= get(_ratio_),
                        x= x &amp;&amp; x * ratio,
                        y= y &amp;&amp; y * ratio
                      <span class="keyword">var</span>
                        style= { display: visible ? _block_:_none_, left: px(x), top: px(y) }
                      $note.css(style);
                    });
                  },
                  <span class="string">'up.annotations'</span>: <span class="keyword">function</span>(e, ev){
                    <span class="keyword">if</span> (panned &gt; <span class="number">10</span> || wheeled) <span class="keyword">return</span>;
                    <span class="keyword">var</span>
                      $target= $(ev.target),
                      $link= ($target.is(<span class="string">'a'</span>) ? $target : $target.parents(<span class="string">'a'</span>)),
                      href= $link.attr(<span class="string">'href'</span>)
                    href &amp;&amp; (panned= <span class="number">10</span>);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-169'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Click-Stepping-Events'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Click-Stepping-Events">&#182;</a>
                </div>
              
              <h2>Click Stepping Events</h2>

            </div>
            
        </li>
        
        
        <li id='section-171'>
            <div class="annotation">
              
              <p>For devices without drag support or for developers, who want to use some sort
of left &amp; right buttons on their site to control your instance from outside, Reel
supports ordinary click with added detection of left half or right half and resulting
triggering of <code>stepLeft</code> and <code>stepRight</code> events respectively.</p>
<p>This behavior can be disabled by the <a href="#steppable-Option"><code>steppable</code></a> option.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'up.steppable'</span>: <span class="keyword">function</span>(e, ev){
                    <span class="keyword">if</span> (panned || wheeled) <span class="keyword">return</span>;
                    t.trigger(get(_clicked_location_).x - t.offset().left &gt; <span class="number">0.5</span> * get(_width_) ? <span class="string">'stepRight'</span> : <span class="string">'stepLeft'</span>)
                  },
                  <span class="string">'stepLeft stepRight'</span>: <span class="keyword">function</span>(e){
                    unidle();
                  },</pre></div></div>
            
        </li>
        
        
        <li id='stepLeft-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#stepLeft-Event">&#182;</a>
                </div>
              
              <h3><code>stepLeft</code> Event</h3>
<p><code>Event</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  stepLeft: <span class="keyword">function</span>(e){
                    set(_backwards_, <span class="literal">false</span>);
                    set(_fraction_, get(_fraction_) - get(_bit_) * get(_cwish_));
                  },</pre></div></div>
            
        </li>
        
        
        <li id='stepRight-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#stepRight-Event">&#182;</a>
                </div>
              
              <h3><code>stepRight</code> Event</h3>
<p><code>Event</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  stepRight: <span class="keyword">function</span>(e){
                    set(_backwards_, <span class="literal">true</span>);
                    set(_fraction_, get(_fraction_) + get(_bit_) * get(_cwish_));
                  },</pre></div></div>
            
        </li>
        
        
        <li id='stepUp-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#stepUp-Event">&#182;</a>
                </div>
              
              <h3><code>stepUp</code> Event</h3>
<p>[NEW] <code>Event</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  stepUp: <span class="keyword">function</span>(e){
                    set(_row_, get(_row_) - <span class="number">1</span>);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='stepDown-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#stepDown-Event">&#182;</a>
                </div>
              
              <h3><code>stepDown</code> Event</h3>
<p>[NEW] <code>Event</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  stepDown: <span class="keyword">function</span>(e){
                    set(_row_, get(_row_) + <span class="number">1</span>);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-176'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Responsive-Events'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Responsive-Events">&#182;</a>
                </div>
              
              <h2>[NEW] Responsive Events</h2>

            </div>
            
        </li>
        
        
        <li id='section-178'>
            <div class="annotation">
              
              <p>In responsive mode in case of parent&#39;s size change, in addition to actual recalculations,
the instance starts to emit throttled <code>resize</code> events. This handler in turn emulates
images changes event leading to reload of frames.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='resize-Event'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#resize-Event">&#182;</a>
                </div>
              
              <h3><code>resize</code> Event</h3>
<p>[NEW] <code>Event</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  resize: <span class="keyword">function</span>(e, force){
                    <span class="keyword">if</span> (get(_loading_) &amp;&amp; !force) <span class="keyword">return</span>;
                    <span class="keyword">var</span>
                      stitched= get(_stitched_),
                      spacing= get(_spacing_),
                      height= get(_height_),
                      is_sprite= !get(_images_).length || stitched,
                      rows= opt.rows || <span class="number">1</span>,
                      size= get(_images_).length
                        ? !stitched ? <span class="literal">undefined</span> : px(stitched)+___+px(height)
                        : stitched &amp;&amp; px(stitched)+___+px((height + spacing) * rows - spacing)
                        || px((get(_width_) + spacing) * get(_footage_) - spacing)+___+px((height + spacing) * get(_rows_) * rows * (opt.directional? <span class="number">2</span>:<span class="number">1</span>) - spacing)
                    t.css({
                      height: is_sprite ? px(height) : <span class="literal">null</span>,
                      backgroundSize: size || <span class="literal">null</span>
                    });
                    force || t.trigger(<span class="string">'imagesChange'</span>);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-180'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Follow-up-Events'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Follow-up-Events">&#182;</a>
                </div>
              
              <h2>Follow-up Events</h2>

            </div>
            
        </li>
        
        
        <li id='section-182'>
            <div class="annotation">
              
              <p>When some event as a result triggers another event, it preferably is not triggered
directly, because it would disallow preventing the event propagation / chaining
to happen. Instead a followup handler is bound to the first event and it triggers the
second one.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'setup.fu'</span>: <span class="keyword">function</span>(e){
                    <span class="keyword">var</span>
                      frame= set(_frame_, opt.frame + (get(_row_) - <span class="number">1</span>) * get(_frames_))
                    t.trigger(<span class="string">'preload'</span>)
                  },
                  <span class="string">'wheel.fu'</span>: <span class="keyword">function</span>(){ wheeled= <span class="literal">false</span> },
                  <span class="string">'clean.fu'</span>: <span class="keyword">function</span>(){ t.trigger(<span class="string">'teardown'</span>) },
                  <span class="string">'loaded.fu'</span>: <span class="keyword">function</span>(){ t.trigger(<span class="string">'opening'</span>) }
                },</pre></div></div>
            
        </li>
        
        
        <li id='section-183'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Tick-Handlers'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Tick-Handlers">&#182;</a>
                </div>
              
              <h2>Tick Handlers</h2>

            </div>
            
        </li>
        
        
        <li id='section-185'>
            <div class="annotation">
              
              <p>As opposed to the events bound to the instance itself, there is a <a href="#Ticker">ticker</a>
in place, which emits <code>tick.reel</code> event on the document level by default every 1/36
of a second and drives all the animations. Three handlers currently bind each instance
to the tick.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                pool: {</pre></div></div>
            
        </li>
        
        
        <li id='section-186'>
            <div class="annotation">
              
              <p>This handler has a responsibility of continuously updating the preloading indicator
until all images are loaded and to unbind itself then.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'tick.reel.preload'</span>: <span class="keyword">function</span>(e){
                    <span class="keyword">if</span> (!(loaded || get(_loading_)) || get(_shy_)) <span class="keyword">return</span>;
                    <span class="keyword">var</span>
                      width= get(_width_),
                      current= number(preloader.$.css(_width_)),
                      images= get(_images_).length || <span class="number">1</span>,
                      target= round(<span class="number">1</span> / images * get(_preloaded_) * width)
                    preloader.$.css({ width: current + (target - current) / <span class="number">3</span> + <span class="number">1</span> })
                    <span class="keyword">if</span> (get(_preloaded_) === images &amp;&amp; current &gt; width - <span class="number">1</span>){
                      loaded= <span class="literal">false</span>;
                      preloader.$.fadeOut(<span class="number">300</span>, <span class="keyword">function</span>(){ preloader.$.css({ opacity: <span class="number">1</span>, width: <span class="number">0</span> }) });
                    }
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-187'>
            <div class="annotation">
              
              <p>This handler binds to the document&#39;s ticks at all times, regardless the situation.
It serves several tasks:</p>
<ul>
<li>keeps track of how long the instance is being operated by the user,</li>
<li>or for how long it is braking the velocity inertia,</li>
<li>decreases gained velocity by applying power of the <a href="#brake-Option"><code>brake</code></a> option,</li>
<li>flags the instance as <code>slidable</code> again, so that <code>pan</code> event handler can be executed
again,</li>
<li>updates the <a href="#monitor-Option"><code>monitor</code></a> value,</li>
<li>bounces off the edges for non-looping panoramas,</li>
<li>and most importantly it animates the Reel if <a href="#speed-Option"><code>speed</code></a> is configured.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'tick.reel'</span>: <span class="keyword">function</span>(e){
                    <span class="keyword">if</span> (get(_shy_)) <span class="keyword">return</span>;
                    <span class="keyword">var</span>
                      velocity= get(_velocity_),
                      leader_tempo= leader(_tempo_),
                      monitor= opt.monitor
                    <span class="keyword">if</span> (!reel.intense &amp;&amp; offscreen()) <span class="keyword">return</span>;
                    <span class="keyword">if</span> (braking) <span class="keyword">var</span>
                      braked= velocity - (get(_brake_) / leader_tempo * braking),
                      velocity= set(_velocity_, braked &gt; <span class="number">0.1</span> ? braked : (braking= operated= <span class="number">0</span>))
                    monitor &amp;&amp; $monitor.text(get(monitor));
                    velocity &amp;&amp; braking++;
                    operated &amp;&amp; operated++;
                    to_bias(<span class="number">0</span>);
                    slidable= <span class="literal">true</span>;
                    <span class="keyword">if</span> (operated &amp;&amp; !velocity) <span class="keyword">return</span> mute(e);
                    <span class="keyword">if</span> (get(_clicked_)) <span class="keyword">return</span> mute(e, unidle());
                    <span class="keyword">if</span> (get(_opening_ticks_) &gt; <span class="number">0</span>) <span class="keyword">return</span>;
                    <span class="keyword">if</span> (!opt.loops &amp;&amp; opt.rebound) <span class="keyword">var</span>
                      edgy= !operated &amp;&amp; !(get(_fraction_) % <span class="number">1</span>) ? on_edge++ : (on_edge= <span class="number">0</span>),
                      bounce= on_edge &gt;= opt.rebound * <span class="number">1000</span> / leader_tempo,
                      backwards= bounce &amp;&amp; set(_backwards_, !get(_backwards_))
                    <span class="keyword">var</span>
                      direction= get(_cwish_) * negative_when(<span class="number">1</span>, get(_backwards_)),
                      ticks= get(_ticks_),
                      step= (!get(_playing_) || oriented || !ticks ? velocity : abs(get(_speed_)) + velocity) / leader(_tempo_),
                      fraction= set(_fraction_, get(_fraction_) - step * direction),
                      ticks= !opt.duration ? ticks : ticks &gt; <span class="number">0</span> &amp;&amp; set(_ticks_, ticks - <span class="number">1</span>)
                    !ticks &amp;&amp; get(_playing_) &amp;&amp; t.trigger(<span class="string">'stop'</span>);
                  },</pre></div></div>
            
        </li>
        
        
        <li id='section-188'>
            <div class="annotation">
              
              <p>This handler performs the opening animation duty when during it the normal animation
is halted until the opening finishes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  <span class="string">'tick.reel.opening'</span>: <span class="keyword">function</span>(e){
                    <span class="keyword">if</span> (!get(_opening_)) <span class="keyword">return</span>;
                    <span class="keyword">var</span>
                      speed= opt.entry || opt.speed,
                      step= speed / leader(_tempo_) * (opt.cw? -<span class="number">1</span>:<span class="number">1</span>),
                      ticks= set(_opening_ticks_, get(_opening_ticks_) - <span class="number">1</span>),
                      fraction= set(_fraction_, get(_fraction_) + step)
                    ticks || t.trigger(<span class="string">'openingDone'</span>);
                  }
                }
              },

              loaded= <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-189'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Instance-Private-Helpers'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Instance-Private-Helpers">&#182;</a>
                </div>
              
              <h2>Instance Private Helpers</h2>

            </div>
            
        </li>
        
        
        <li id='section-191'>
            <div class="annotation">
              
              <ul>
<li>Events propagation stopper / muter</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              mute= <span class="keyword">function</span>(e, result){ <span class="keyword">return</span> e.stopImmediatePropagation() || result },</pre></div></div>
            
        </li>
        
        
        <li id='section-192'>
            <div class="annotation">
              
              <ul>
<li>Shy initialization helper</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              shy_setup= <span class="keyword">function</span>(){ t.trigger(<span class="string">'setup'</span>) },</pre></div></div>
            
        </li>
        
        
        <li id='section-193'>
            <div class="annotation">
              
              <ul>
<li>User idle control</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              operated,
              braking= <span class="number">0</span>,
              idle= <span class="keyword">function</span>(){ <span class="keyword">return</span> operated= <span class="number">0</span> },
              unidle= <span class="keyword">function</span>(){
                clearTimeout(delay);
                pool.unbind(_tick_+dot(_opening_), on.pool[_tick_+dot(_opening_)]);
                set(_opening_ticks_, <span class="number">0</span>);
                set(_reeled_, <span class="literal">true</span>);
                <span class="keyword">return</span> operated= -opt.timeout * leader(_tempo_)
              },
              panned= <span class="number">0</span>,
              wheeled= <span class="literal">false</span>,
              oriented= <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-194'>
            <div class="annotation">
              
              <ul>
<li>Constructors of UI elements</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              $monitor= $(),
              preloader= <span class="keyword">function</span>(){
                css(___+dot(preloader_klass), {
                  position: _absolute_,
                  left: <span class="number">0</span>, bottom: <span class="number">0</span>,
                  height: opt.preloader,
                  overflow: _hidden_,
                  backgroundColor: <span class="string">'#000'</span>
                });
                <span class="keyword">return</span> preloader.$= $(tag(_div_), { <span class="string">'class'</span>: preloader_klass })
              },
              indicator= <span class="keyword">function</span>(axis){
                css(___+dot(indicator_klass)+dot(axis), {
                  position: _absolute_,
                  width: <span class="number">0</span>, height: <span class="number">0</span>,
                  overflow: _hidden_,
                  backgroundColor: <span class="string">'#000'</span>
                });
                <span class="keyword">return</span> indicator[<span class="string">'$'</span>+axis]= $(tag(_div_), { <span class="string">'class'</span>: indicator_klass+___+axis })
              },</pre></div></div>
            
        </li>
        
        
        <li id='section-195'>
            <div class="annotation">
              
              <ul>
<li>CSS rules &amp; stylesheet</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              css= <span class="keyword">function</span>(selector, definition, global){
                <span class="keyword">var</span>
                  stage= global ? __ : get(_stage_),
                  selector= selector.replace(<span class="regexp">/^/</span>, stage).replace(____, ____+stage)
                <span class="keyword">return</span> css.rules.push(selector+cssize(definition)) &amp;&amp; definition
                <span class="function"><span class="keyword">function</span> <span class="title">cssize</span><span class="params">(values)</span>{</span>
                  <span class="keyword">var</span> rules= [];
                  $.each(values, <span class="keyword">function</span>(key, value){ rules.push(key.replace(<span class="regexp">/([A-Z])/g</span>, <span class="string">'-$1'</span>).toLowerCase()+<span class="string">':'</span>+px(value)+<span class="string">';'</span>) });
                  <span class="keyword">return</span> <span class="string">'{'</span>+rules.join(__)+<span class="string">'}'</span>
                }
              },
              $style,</pre></div></div>
            
        </li>
        
        
        <li id='section-196'>
            <div class="annotation">
              
              <ul>
<li>Off screen detection (vertical only for performance)</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              offscreen= <span class="keyword">function</span>(){
                <span class="keyword">var</span>
                  height= get(_height_),
                  width= get(_width_),
                  rect= t[<span class="number">0</span>].getBoundingClientRect()
                <span class="keyword">return</span> rect.top &lt; -height
                    || rect.left &lt; -width
                    || rect.right &gt; width + $(window).width()
                    || rect.bottom &gt; height + $(window).height()
              },</pre></div></div>
            
        </li>
        
        
        <li id='section-197'>
            <div class="annotation">
              
              <ul>
<li>Inertia rotation control</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              on_edge= <span class="number">0</span>,
              last= { x: <span class="number">0</span>, y: <span class="number">0</span> },
              to_bias= <span class="keyword">function</span>(value){ <span class="keyword">return</span> bias.push(value) &amp;&amp; bias.shift() &amp;&amp; value },
              no_bias= <span class="keyword">function</span>(){ <span class="keyword">return</span> bias= [<span class="number">0</span>,<span class="number">0</span>] },
              bias= no_bias(),</pre></div></div>
            
        </li>
        
        
        <li id='section-198'>
            <div class="annotation">
              
              <ul>
<li>Graph function to be used</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              graph= opt.graph || reel.math[opt.loops ? <span class="string">'hatch'</span> : <span class="string">'envelope'</span>],
              normal= reel.normal,</pre></div></div>
            
        </li>
        
        
        <li id='section-199'>
            <div class="annotation">
              
              <ul>
<li>Response to the size changes in responsive mode</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              slow_gauge= <span class="keyword">function</span>(){
                clearTimeout(gauge_delay);
                gauge_delay= setTimeout(gauge, reel.resize_gauge);
              },
              gauge= <span class="keyword">function</span>(){
                <span class="keyword">if</span> (t.width() == get(_width_)) <span class="keyword">return</span>;
                <span class="keyword">var</span>
                  truescale= get(_truescale_),
                  ratio= set(_ratio_, t.width() / truescale.width)
                $.each(truescale, <span class="keyword">function</span>(key, value){ set(key, round(value * ratio)) })
                t.trigger(<span class="string">'resize'</span>);
              },</pre></div></div>
            
        </li>
        
        
        <li id='section-200'>
            <div class="annotation">
              
              <ul>
<li>Delay timer pointers</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              delay, <span class="comment">// openingDone's delayed play</span>
              gauge_delay, <span class="comment">// slow_gauge's throttle</span></pre></div></div>
            
        </li>
        
        
        <li id='section-201'>
            <div class="annotation">
              
              <ul>
<li>Interaction graph&#39;s zero point reset</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>              recenter_mouse= <span class="keyword">function</span>(revolution, x, y){
                <span class="keyword">var</span>
                  fraction= set(_clicked_on_, get(_fraction_)),
                  tier= set(_clicked_tier_, get(_tier_)),
                  loops= opt.loops,
                  lo= set(_lo_, loops ? <span class="number">0</span> : - fraction * revolution),
                  hi= set(_hi_, loops ? revolution : revolution - fraction * revolution)
                <span class="keyword">return</span> x !== <span class="literal">undefined</span> &amp;&amp; set(_clicked_location_, { x: x, y: y }) || <span class="literal">undefined</span>
              },
              slidable= <span class="literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-202'>
            <div class="annotation">
              
              <p>~~~</p>
<p>Data interface used to set <code>fraction</code> and <code>tier</code> with the value recalculated through their
<em>cousin</em> keys (<code>frame</code> for <code>fraction</code> and <code>row</code> for <code>tier</code>). This value is actually set
only if it does make a difference in the cousin value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              may_set= <span class="keyword">function</span>(key, value, cousin, maximum){
                <span class="keyword">if</span> (!maximum) <span class="keyword">return</span>;
                <span class="keyword">var</span>
                  current= get(key) || <span class="number">0</span>,
                  recalculated= value !== <span class="literal">undefined</span> ? value : (cousin - <span class="number">1</span>) / (maximum - <span class="number">1</span>),
                  recalculated= key != _fraction_ ? recalculated : min( recalculated, <span class="number">0.9999</span>),
                  worthy= +abs(current - recalculated).toFixed(<span class="number">8</span>) &gt;= +(<span class="number">1</span> / (maximum - <span class="number">1</span>)).toFixed(<span class="number">8</span>),
                  value= worthy ? set(key, recalculated) : value || current
                <span class="keyword">return</span> value
              },</pre></div></div>
            
        </li>
        
        
        <li id='section-203'>
            <div class="annotation">
              
              <p>~~~</p>
<p>Global events are bound to the pool (<code>document</code>), but to make it work inside an <code>&lt;iframe&gt;</code>
we need to bind to the parent document too to maintain the dragging even outside the area
of the <code>&lt;iframe&gt;</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              pools= pool
            <span class="keyword">try</span>{ <span class="keyword">if</span> (pool[<span class="number">0</span>] != top.document) pools= pool.add(top.document) }
            <span class="keyword">catch</span>(e){}</pre></div></div>
            
        </li>
        
        
        <li id='section-204'>
            <div class="annotation">
              
              <p>A private flag <code>$iframe</code> is established to indicate Reel being viewed inside <code>&lt;iframe&gt;</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">var</span>
              $iframe= top === self ? $() : (<span class="function"><span class="keyword">function</span> <span class="title">sense_iframe</span><span class="params">($ifr)</span>{</span>
                $(<span class="string">'iframe'</span>, pools.last()).each(<span class="keyword">function</span>(){
                  <span class="keyword">try</span>{ <span class="keyword">if</span> ($(<span class="keyword">this</span>).contents().find(_head_).html() == $(_head_).html()) <span class="keyword">return</span> ($ifr= $(<span class="keyword">this</span>)) &amp;&amp; <span class="literal">false</span> }
                  <span class="keyword">catch</span>(e){}
                })
                <span class="keyword">return</span> $ifr
              })()
            css.rules= [];
            on.setup();
          });</pre></div></div>
            
        </li>
        
        
        <li id='section-205'>
            <div class="annotation">
              
              <p>~~~</p>
<p>Reel maintains a ticker, which guides all animations. There&#39;s only one ticker per document
and all instances bind to it. Ticker&#39;s mechanism measures and compares times before and after
the <code>tick.reel</code> event trigger to estimate the time spent on executing <code>tick.reel</code>&#39;s handlers.
The actual timeout time is then adjusted by the amount to run as close to expected tempo
as possible.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          ticker= ticker || (<span class="function"><span class="keyword">function</span> <span class="title">tick</span><span class="params">()</span>{</span>
            <span class="keyword">var</span>
              start= +<span class="keyword">new</span> Date(),
              tempo= leader(_tempo_)
            <span class="keyword">if</span> (!tempo) <span class="keyword">return</span> ticker= <span class="literal">null</span>;
            pool.trigger(_tick_);
            reel.cost= (+<span class="keyword">new</span> Date() + reel.cost - start) / <span class="number">2</span>;
            <span class="keyword">return</span> ticker= setTimeout(tick, max(<span class="number">4</span>, <span class="number">1000</span> / tempo - reel.cost));
          })();

          <span class="keyword">return</span> $(instances);
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id='section-206'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Destruction'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Destruction">&#182;</a>
                </div>
              
              <h2>Destruction</h2>

            </div>
            
        </li>
        
        
        <li id='section-208'>
            <div class="annotation">
              
              <p>The evil-twin of <code>.reel()</code>. Tears down and wipes off entire instance.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='unreel-Method'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#unreel-Method">&#182;</a>
                </div>
              
              <h3><code>.unreel()</code> Method</h3>
<p>returns <code>jQuery</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        unreel: <span class="keyword">function</span>(){
          <span class="keyword">return</span> <span class="keyword">this</span>.trigger(<span class="string">'teardown'</span>);
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id='section-210'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Regular-Expressions'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Regular-Expressions">&#182;</a>
                </div>
              
              <h2>Regular Expressions</h2>

            </div>
            
        </li>
        
        
        <li id='section-212'>
            <div class="annotation">
              
              <p>Few regular expressions is used here and there mostly for options validation and verification
levels of user agent&#39;s capabilities.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-re'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-re">&#182;</a>
                </div>
              
              <h3><code>$.reel.re</code></h3>
<p><code>RegExp</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      re: {
        <span class="comment">/* Valid image file format */</span>
        image:         <span class="regexp">/^(.*)\.(jpg|jpeg|png|gif)\??.*$/i</span>,
        <span class="comment">/* User agent failsafe stack */</span>
        ua: [
                       <span class="regexp">/(msie|opera|firefox|chrome|safari)[ \/:]([\d.]+)/i</span>,
                       <span class="regexp">/(webkit)\/([\d.]+)/i</span>,
                       <span class="regexp">/(mozilla)\/([\d.]+)/i</span>
        ],
        <span class="comment">/* Array in a string (comma-separated values) */</span>
        array:         <span class="regexp">/ *, */</span>,
        <span class="comment">/* Lazy (low-CPU mobile devices) */</span>
        lazy_agent:    <span class="regexp">/\(iphone|ipod|android|fennec|blackberry/i</span>,
        <span class="comment">/* Format of frame class flag on the instance */</span>
        frame_klass:   <span class="regexp">/frame-\d+/</span>,
        <span class="comment">/* Mask for substitutions in URL */</span>
        substitution:  <span class="regexp">/(@([A-Z]))/g</span>,
        <span class="comment">/* Used for cross-browser detection of Regexp no match situation */</span>
        no_match:      <span class="regexp">/^(undefined|)$/</span>,
        <span class="comment">/* [Sequence](#Sequence) string format */</span>
        sequence:      <span class="regexp">/(^[^#|]*([#]+)[^#|]*)($|[|]([0-9]+)\.\.([0-9]+))($|[|]([0-9]+)$)/</span>
      },</pre></div></div>
            
        </li>
        
        
        <li id='section-214'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Content-Delivery-Network'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Content-Delivery-Network">&#182;</a>
                </div>
              
              <h2>Content Delivery Network</h2>

            </div>
            
        </li>
        
        
        <li id='section-216'>
            <div class="annotation">
              
              <p><a href="https://github.com/pisi/Reel/wiki/CDN">CDN</a> is used for distributing mouse cursors to all instances running world-wide. It runs
on Google cloud infrastructure. If you want to ease up on the servers, please consider setting up
your own location with the cursors.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-cdn'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-cdn">&#182;</a>
                </div>
              
              <h3><code>$.reel.cdn</code></h3>
<p><code>String</code> (URL path), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      cdn: <span class="string">'http://code.vostrel.net/'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-218'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Math-Behind'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Math-Behind">&#182;</a>
                </div>
              
              <h2>Math Behind</h2>

            </div>
            
        </li>
        
        
        <li id='section-220'>
            <div class="annotation">
              
              <p>Surprisingly there&#39;s very little math behind Reel. Two equations (graph functions), which
drive Reel motion and receive the same set of options.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-math'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-math">&#182;</a>
                </div>
              
              <h3><code>$.reel.math</code></h3>
<p><code>Object</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      math: {</pre></div></div>
            
        </li>
        
        
        <li id='section-222'>
            <div class="annotation">
              
              <pre><code>1 |  ********
  |          **
  |            **
  |              **
  |                **
  |                  ********
0  ----------------------------›</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>        envelope: <span class="keyword">function</span>(x, start, revolution, lo, hi, cwness, y){
          <span class="keyword">return</span> start + min_max(lo, hi, - x * cwness) / revolution
        },</pre></div></div>
            
        </li>
        
        
        <li id='section-223'>
            <div class="annotation">
              
              <pre><code>1 |        **          **
  |          **          **
  |            **          **
  |  **          **
  |    **          **
  |      **          **
0  ----------------------------›</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>        hatch: <span class="keyword">function</span>(x, start, revolution, lo, hi, cwness, y){
          <span class="keyword">var</span>
            x= (x &lt; lo ? hi : <span class="number">0</span>) + x % hi, <span class="comment">// Looping</span>
            fraction= start + (- x * cwness) / revolution
          <span class="keyword">return</span> fraction - floor(fraction)
        },</pre></div></div>
            
        </li>
        
        
        <li id='section-224'>
            <div class="annotation">
              
              <p>Plus equation for interpolating <code>fraction</code> (and <code>tier</code>) value into <code>frame</code> and <code>row</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        interpolate: <span class="keyword">function</span>(fraction, lo, hi){
          <span class="keyword">return</span> lo + fraction * (hi - lo)
        },</pre></div></div>
            
        </li>
        
        
        <li id='section-225'>
            <div class="annotation">
              
              <p>And one for calculation of the shortest frame distance from start to the end.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        distance: <span class="keyword">function</span>(start, end, total){
          <span class="keyword">var</span>
            half= total / <span class="number">2</span>,
            d= end - start
          <span class="keyword">return</span> d &lt; -half ? d + total : d &gt; half ? d - total : d
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id='section-226'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Preloading-Modes'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Preloading-Modes">&#182;</a>
                </div>
              
              <h2>Preloading Modes</h2>

            </div>
            
        </li>
        
        
        <li id='section-228'>
            <div class="annotation">
              
              <p>Reel doesn&#39;t load frames in a linear manner from first to last (alhough it can if configured
that way with the <a href="#preload-Option"><code>preload</code></a> option). Reel will take the linear configured
sequence and hand it over to one of <code>$.reel.preload</code> functions, along with reference to options
and the RO data intearface, and it expects the function to reorder the incoming Array and return
it back.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-preload'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-preload">&#182;</a>
                </div>
              
              <h3><code>$.reel.preload</code></h3>
<p><code>Object</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      preload: {</pre></div></div>
            
        </li>
        
        
        <li id='section-230'>
            <div class="annotation">
              
              <p>The best (and default) option is the <code>fidelity</code> processor, which is designed for a faster and
better perceived loading.</p>
<p><img src="https://camo.githubapp.com/74b73060a50f3cbaf522ec31530d34e3fa5cbcb9/687474703a2f2f6a71756572792e766f737472656c2e637a2f7265656c2f7363617474657265642e6c6f6164696e672e676966" alt="Example"></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        fidelity: <span class="keyword">function</span>(sequence, opt, get){
          <span class="keyword">var</span>
            orbital= opt.orbital,
            rows= orbital ? <span class="number">2</span> : opt.rows || <span class="number">1</span>,
            frames= orbital ? get(_footage_) : get(_frames_),
            start= (opt.row-<span class="number">1</span>) * frames,
            values= <span class="keyword">new</span> Array().concat(sequence),
            present= <span class="keyword">new</span> Array(sequence.length + <span class="number">1</span>),
            priority= rows &lt; <span class="number">2</span> ? [] : values.slice(start, start + frames)
          <span class="keyword">return</span> spread(priority, <span class="number">1</span>, start).concat(spread(values, rows, <span class="number">0</span>))

          <span class="function"><span class="keyword">function</span> <span class="title">spread</span><span class="params">(sequence, rows, offset)</span>{</span>
            <span class="keyword">if</span> (!sequence.length) <span class="keyword">return</span> [];
            <span class="keyword">var</span>
              order= [],
              passes= <span class="number">4</span> * rows,
              start= opt.frame,
              frames= sequence.length,
              plus= <span class="literal">true</span>,
              granule= frames / passes
            <span class="keyword">for</span>(<span class="keyword">var</span> i= <span class="number">0</span>; i &lt; passes; i++)
              add(start + round(i * granule));
            <span class="keyword">while</span>(granule &gt; <span class="number">1</span>)
              <span class="keyword">for</span>(<span class="keyword">var</span> i= <span class="number">0</span>, length= order.length, granule= granule / <span class="number">2</span>, p= plus= !plus; i &lt; length; i++)
                add(order[i] + (plus? <span class="number">1</span>:-<span class="number">1</span>) * round(granule));
            <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i &lt;= frames; i++) add(i);
            <span class="keyword">for</span>(<span class="keyword">var</span> i= <span class="number">0</span>; i &lt; order.length; i++)
              order[i]= sequence[order[i] - <span class="number">1</span>];
            <span class="keyword">return</span> order
            <span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(frame)</span>{</span>
              <span class="keyword">while</span>(!(frame &gt;= <span class="number">1</span> &amp;&amp; frame &lt;= frames))
                frame+= frame &lt; <span class="number">1</span> ? +frames : -frames;
              <span class="keyword">return</span> present[offset + frame] || (present[offset + frame]= !!order.push(frame))
            }
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id='section-231'>
            <div class="annotation">
              
              <p>You can opt for a <code>linear</code> loading order too, but that has a drawback of leaving large gap
of unloaded frames.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        linear: <span class="keyword">function</span>(sequence, opt, get){
          <span class="keyword">return</span> sequence
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id='section-232'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Data-Values-in-URLs'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Data-Values-in-URLs">&#182;</a>
                </div>
              
              <h2>[NEW] Data Values in URLs</h2>

            </div>
            
        </li>
        
        
        <li id='section-234'>
            <div class="annotation">
              
              <p>Reel will process each and every image resource URL and substitute special markup
with actual values from the data store. Marks made of <code>@</code> character followed by upper case
letter will be substituted with values either directly from data store (<code>@W</code> and <code>@H</code>
for <code>width</code> and <code>height</code>) or calculated (<code>@T</code> is substituted with momentary timestamp
in milliseconds).
Markup can appear anywhere in the folder name, file name or the query params
(also in <a href="#path-Option"><code>path</code></a>) and even multiple times.</p>
<p>Comes handy in product configurators
and works magic in conjunction with <a href="#responsive-Option">responsive</a> option.</p>
<p><em><strong>Example:</strong> Following URLs:</em></p>
<pre><code>image.jpg?size=@Wx@H
pic/@W/@H/rabbit.png
image.php?nocache=@T</code></pre>
<p><em>... will come out like this for Reel 320 pixels wide and 180 high:</em></p>
<pre><code>image.jpg?size=320x180
pic/320/180/rabbit.png
image.php?nocache=1377604502788</code></pre>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-substitute'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-substitute">&#182;</a>
                </div>
              
              <h3><code>$.reel.substitute()</code></h3>
<p>[NEW] <code>Function</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      substitute: <span class="keyword">function</span>(uri, get){
        <span class="keyword">return</span> uri.replace(reel.re.substitution, <span class="keyword">function</span>(match, mark, key){
          <span class="keyword">return</span> <span class="keyword">typeof</span> reel.substitutes[key] == <span class="string">'function'</span>
                      ? reel.substitutes[key](get) : substitution_keys[key]
                      ? get(substitution_keys[key]) : mark;
        });
      },</pre></div></div>
            
        </li>
        
        
        <li id='reel-substitutes'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-substitutes">&#182;</a>
                </div>
              
              <h3><code>$.reel.substitutes</code></h3>
<p>[NEW] <code>Object</code> of <code>Function</code>s, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      substitutes: {
        T: <span class="keyword">function</span>(get){ <span class="keyword">return</span> +<span class="keyword">new</span> Date() }
      },</pre></div></div>
            
        </li>
        
        
        <li id='section-237'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Data-Value-Normalization'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Data-Value-Normalization">&#182;</a>
                </div>
              
              <h2>Data Value Normalization</h2>

            </div>
            
        </li>
        
        
        <li id='section-239'>
            <div class="annotation">
              
              <p>On all data values being stored with <code>.reel()</code> an attempt is made to normalize the value. Like
for example normalization of frame <code>55</code> when there&#39;s just <code>45</code> frames total. These are the built-in
normalizations. Normalization function has the same name as the data key it is assigned to
and is given the raw value in arguments, along with reference to the instances data object,
and it has to return the normalized value.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-normal'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-normal">&#182;</a>
                </div>
              
              <h3><code>$.reel.normal</code></h3>
<p><code>Object</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      normal: {
        fraction: <span class="keyword">function</span>(fraction, data){
          <span class="keyword">if</span> (fraction === <span class="literal">null</span>) <span class="keyword">return</span> fraction;
          <span class="keyword">return</span> data[_options_].loops ? fraction - floor(fraction) : min_max(<span class="number">0</span>, <span class="number">1</span>, fraction)
        },
        tier: <span class="keyword">function</span>(tier, data){
          <span class="keyword">if</span> (tier === <span class="literal">null</span>) <span class="keyword">return</span> tier;
          <span class="keyword">return</span> min_max(<span class="number">0</span>, <span class="number">1</span>, tier)
        },
        row: <span class="keyword">function</span>(row, data){
          <span class="keyword">if</span> (row === <span class="literal">null</span>) <span class="keyword">return</span> row;
          <span class="keyword">return</span> round(min_max(<span class="number">1</span>, data[_options_].rows, row))
        },
        frame: <span class="keyword">function</span>(frame, data){
          <span class="keyword">if</span> (frame === <span class="literal">null</span>) <span class="keyword">return</span> frame;
          <span class="keyword">var</span>
            opt= data[_options_],
            frames= data[_frames_] * (opt.orbital ? <span class="number">2</span> : opt.rows || <span class="number">1</span>),
            result= round(opt.loops ? frame % frames || frames : min_max(<span class="number">1</span>, frames, frame))
          <span class="keyword">return</span> result &lt; <span class="number">0</span> ? result + frames : result
        },
        images: <span class="keyword">function</span>(images, data){
          <span class="keyword">var</span>
            sequence= reel.re.sequence.exec(images),
            result= !sequence ? images : reel.sequence(sequence, data[_options_])
          <span class="keyword">return</span> result;
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id='section-241'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Sequence-Build-up'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Sequence-Build-up">&#182;</a>
                </div>
              
              <h2>Sequence Build-up</h2>

            </div>
            
        </li>
        
        
        <li id='section-243'>
            <div class="annotation">
              
              <p>When configured with a String value for <a href="#images-Option"><code>images</code></a> like <code>image##.jpg</code>, it first has
to be converted into an actual Array by engaging the counter placeholder.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-sequence'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-sequence">&#182;</a>
                </div>
              
              <h3><code>$.reel.sequence()</code></h3>
<p><code>Function</code>, since 1.2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      sequence: <span class="keyword">function</span>(sequence, opt){
        <span class="keyword">if</span> (sequence.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> opt.images;
        <span class="keyword">var</span>
          images= [],
          orbital= opt.orbital,
          url= sequence[<span class="number">1</span>],
          placeholder= sequence[<span class="number">2</span>],
          start= sequence[<span class="number">4</span>],
          start= reel.re.no_match.test(start+__) ? <span class="number">1</span> : +start,
          rows= orbital ? <span class="number">2</span> : opt.rows || <span class="number">1</span>,
          frames= orbital ? opt.footage : opt.stitched ? <span class="number">1</span> : opt.frames,
          end= +(sequence[<span class="number">5</span>] || rows * frames),
          total= end - start,
          increment= +sequence[<span class="number">7</span>] || <span class="number">1</span>,
          counter= <span class="number">0</span>
        <span class="keyword">while</span>(counter &lt;= total){
          images.push(url.replace(placeholder, pad((start + counter + __), placeholder.length, <span class="string">'0'</span>)));
          counter+= increment;
        }
        <span class="keyword">return</span> images;
      },</pre></div></div>
            
        </li>
        
        
        <li id='section-245'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Reel-Instances'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Reel-Instances">&#182;</a>
                </div>
              
              <h2>Reel Instances</h2>

            </div>
            
        </li>
        
        
        <li id='section-247'>
            <div class="annotation">
              
              <p><code>$.reel.instances</code> holds an inventory of all running instances in the DOM document.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-instances'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-instances">&#182;</a>
                </div>
              
              <h3><code>$.reel.instances</code></h3>
<p><code>jQuery</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      instances: $(),</pre></div></div>
            
        </li>
        
        
        <li id='section-249'>
            <div class="annotation">
              
              <p>For ticker-synchronization-related purposes Reel maintains a reference to the leaders data object
all the time.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-leader'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-leader">&#182;</a>
                </div>
              
              <h3><code>$.reel.leader</code></h3>
<p><code>Object</code> (DOM data), since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      leader: leader,</pre></div></div>
            
        </li>
        
        
        <li id='section-251'>
            <div class="annotation">
              
              <p><code>$.reel.resize_gauge</code> specifies a throttling interval for triggering of <code>resize</code> events,
in milliseconds.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-resize-gauge'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-resize-gauge">&#182;</a>
                </div>
              
              <h3><code>$.reel.resize_gauge</code></h3>
<p>[NEW] <code>Number</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      resize_gauge: <span class="number">300</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-253'>
            <div class="annotation">
              
              <p><code>$.reel.concurrent_requests</code> specifies how many preloading requests will run simultaneously.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-concurrent-requests'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-concurrent-requests">&#182;</a>
                </div>
              
              <h3><code>$.reel.concurrent_requests</code></h3>
<p>[NEW] <code>Number</code>, since 1.3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      concurrent_requests: <span class="number">4</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-255'>
            <div class="annotation">
              
              <p><code>$.reel.cost</code> holds document-wide costs in miliseconds of running all Reel instances. It is used
to adjust actual timeout of the ticker.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id='reel-cost'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h3">
                  <a class="pilcrow" href="#reel-cost">&#182;</a>
                </div>
              
              <h3><code>$.reel.cost</code></h3>
<p><code>Number</code>, since 1.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      cost: <span class="number">0</span>
    },</pre></div></div>
            
        </li>
        
        
        <li id='section-257'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Private-scoped-Variables'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Private-scoped-Variables">&#182;</a>
                </div>
              
              <h2>Private-scoped Variables</h2>

            </div>
            
        </li>
        
        
        <li id='section-259'>
            <div class="annotation">
              
              
            </div>
            
            <div class="content"><div class='highlight'><pre>    pool= $(document),
    client= navigator.userAgent,
    browser= reel.re.ua[<span class="number">0</span>].exec(client) || reel.re.ua[<span class="number">1</span>].exec(client) || reel.re.ua[<span class="number">2</span>].exec(client),
    browser_version= +browser[<span class="number">2</span>].split(<span class="string">'.'</span>).slice(<span class="number">0</span>,<span class="number">2</span>).join(<span class="string">'.'</span>),
    ie= browser[<span class="number">1</span>] == <span class="string">'MSIE'</span>,
    knows_data_urls= !(ie &amp;&amp; browser_version &lt; <span class="number">8</span>),
    knows_background_size= !(ie &amp;&amp; browser_version &lt; <span class="number">9</span>),
    ticker,</pre></div></div>
            
        </li>
        
        
        <li id='section-260'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='CSS-Class-Names'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#CSS-Class-Names">&#182;</a>
                </div>
              
              <h2>CSS Class Names</h2>

            </div>
            
        </li>
        
        
        <li id='section-262'>
            <div class="annotation">
              
              <p>These are all the class names assigned by Reel to various DOM elements during initialization of the UI
and they all share same base <code>&quot;reel&quot;</code>, which in isolation also is the class of the <code>&lt;img&gt;</code> node you
converted into Reel.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    klass= <span class="string">'reel'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-263'>
            <div class="annotation">
              
              <p>Rest of the class names only extend this base class forming for example <code>.reel-overlay</code>, a class
assigned to the outter instance wrapper (<code>&lt;img&gt;</code>&#39;s injected parent).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    overlay_klass= klass + <span class="string">'-overlay'</span>,
    cache_klass= klass + <span class="string">'-cache'</span>,
    indicator_klass= klass + <span class="string">'-indicator'</span>,
    preloader_klass= klass + <span class="string">'-preloader'</span>,
    monitor_klass= klass + <span class="string">'-monitor'</span>,
    annotation_klass= klass + <span class="string">'-annotation'</span>,
    panning_klass= klass + <span class="string">'-panning'</span>,
    loading_klass= klass + <span class="string">'-loading'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-264'>
            <div class="annotation">
              
              <p>The instance wrapper is flagged with actual frame number using a this class.</p>
<p><em><strong>Example:</strong> Reel on frame 10 will carry a class name <code>frame-10</code>.</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    frame_klass= <span class="string">'frame-'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-265'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Shortcuts-And-Minification-Cache'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Shortcuts-And-Minification-Cache">&#182;</a>
                </div>
              
              <h2>Shortcuts And Minification Cache</h2>

            </div>
            
        </li>
        
        
        <li id='section-267'>
            <div class="annotation">
              
              <p>Several math functions are referenced inside the private scope to yield smaller filesize
when the code is minified.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    math= Math,
    round= math.round, floor= math.floor, ceil= math.ceil,
    min= math.min, max= math.max, abs= math.abs,
    number= parseInt,
    interpolate= reel.math.interpolate,</pre></div></div>
            
        </li>
        
        
        <li id='section-268'>
            <div class="annotation">
              
              <p>For the very same reason all storage key Strings are cached into local vars.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _annotations_= <span class="string">'annotations'</span>, _area_= <span class="string">'area'</span>, _auto_= <span class="string">'auto'</span>,
    _backup_= <span class="string">'backup'</span>, _backwards_= <span class="string">'backwards'</span>, _bit_= <span class="string">'bit'</span>, _brake_= <span class="string">'brake'</span>,
    _cache_= <span class="string">'cache'</span>, _cached_=_cache_+<span class="string">'d'</span>, _center_= <span class="string">'center'</span>, _class_= <span class="string">'class'</span>, _click_= <span class="string">'click'</span>,
    _clicked_= _click_+<span class="string">'ed'</span>, _clicked_location_= _clicked_+<span class="string">'_location'</span>, _clicked_on_= _clicked_+<span class="string">'_on'</span>,
    _clicked_tier_= _clicked_+<span class="string">'_tier'</span>, _cwish_= <span class="string">'cwish'</span>,
    _departure_= <span class="string">'departure'</span>, _destination_= <span class="string">'destination'</span>, _distance_= <span class="string">'distance'</span>,
    _footage_= <span class="string">'footage'</span>, _fraction_= <span class="string">'fraction'</span>, _frame_= <span class="string">'frame'</span>, _framelock_= <span class="string">'framelock'</span>, _frames_= <span class="string">'frames'</span>,
    _height_= <span class="string">'height'</span>, _hi_= <span class="string">'hi'</span>, _hidden_= <span class="string">'hidden'</span>,
    _image_= <span class="string">'image'</span>, _images_= <span class="string">'images'</span>,
    _lo_= <span class="string">'lo'</span>, _loading_= <span class="string">'loading'</span>,
    _mouse_= <span class="string">'mouse'</span>,
    _opening_= <span class="string">'opening'</span>, _opening_ticks_= _opening_+<span class="string">'_ticks'</span>, _options_= <span class="string">'options'</span>,
    _playing_= <span class="string">'playing'</span>, _preloaded_= <span class="string">'preloaded'</span>,
    _ratio_= <span class="string">'ratio'</span>, _reeling_= <span class="string">'reeling'</span>, _reeled_= <span class="string">'reeled'</span>, _responsive_= <span class="string">'responsive'</span>, _revolution_= <span class="string">'revolution'</span>,
    _revolution_y_= <span class="string">'revolution_y'</span>, _row_= <span class="string">'row'</span>, _rowlock_= <span class="string">'rowlock'</span>, _rows_= <span class="string">'rows'</span>,
    _shy_= <span class="string">'shy'</span>, _spacing_= <span class="string">'spacing'</span>, _speed_= <span class="string">'speed'</span>, _src_= <span class="string">'src'</span>, _stage_= <span class="string">'stage'</span>, _stitched_= <span class="string">'stitched'</span>,
    _stitched_shift_= _stitched_+<span class="string">'_shift'</span>, _stitched_travel_= _stitched_+<span class="string">'_travel'</span>, _stopped_= <span class="string">'stopped'</span>,
    _style_= <span class="string">'style'</span>,
    _tempo_= <span class="string">'tempo'</span>, _ticks_= <span class="string">'ticks'</span>, _tier_= <span class="string">'tier'</span>, _touch_= <span class="string">'touch'</span>, _truescale_= <span class="string">'truescale'</span>,
    _velocity_= <span class="string">'velocity'</span>, _vertical_= <span class="string">'vertical'</span>,
    _width_= <span class="string">'width'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-269'>
            <div class="annotation">
              
              <p>And the same goes for browser events too.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    ns= dot(klass),
    pns= dot(<span class="string">'pan'</span>) + ns,
    _deviceorientation_= <span class="string">'deviceorientation'</span>+ns, _dragstart_= <span class="string">'dragstart'</span>+ns,
    _mousedown_= _mouse_+<span class="string">'down'</span>+ns, _mouseenter_= _mouse_+<span class="string">'enter'</span>+ns, _mouseleave_= _mouse_+<span class="string">'leave'</span>+pns,
    _mousemove_= _mouse_+<span class="string">'move'</span>+pns, _mouseup_= _mouse_+<span class="string">'up'</span>+pns, _mousewheel_= _mouse_+<span class="string">'wheel'</span>+ns,
    _tick_= <span class="string">'tick'</span>+ns, _touchcancel_= _touch_+<span class="string">'cancel'</span>+pns, _touchend_= _touch_+<span class="string">'end'</span>+pns,
    _touchstart_= _touch_+<span class="string">'start'</span>+ns, _touchmove_= _touch_+<span class="string">'move'</span>+pns,
    _resize_= <span class="string">'resize'</span>+ns,</pre></div></div>
            
        </li>
        
        
        <li id='section-270'>
            <div class="annotation">
              
              <p>And some other frequently used Strings.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    __= <span class="string">''</span>, ___= <span class="string">' '</span>, ____=<span class="string">','</span>, _absolute_= <span class="string">'absolute'</span>, _block_= <span class="string">'block'</span>, _cdn_= <span class="string">'@CDN@'</span>, _div_= <span class="string">'div'</span>,
    _hand_= <span class="string">'hand'</span>, _head_= <span class="string">'head'</span>, _html_= <span class="string">'html'</span>, _id_= <span class="string">'id'</span>,
    _img_= <span class="string">'img'</span>, _jquery_reel_= <span class="string">'jquery.'</span>+klass, _move_= <span class="string">'move'</span>, _none_= <span class="string">'none'</span>, _object_= <span class="string">'object'</span>,
    _preload_= <span class="string">'preload'</span>, _string_= <span class="string">'string'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-271'>
            <div class="annotation">
              
              <p>Collection of data keys holding scalable pixel values responsive to the scale ratio</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    responsive_keys= [_width_, _height_, _spacing_, _revolution_, _revolution_y_, _stitched_, _stitched_shift_, _stitched_travel_],
    substitution_keys= { W: _width_, H: _height_ },</pre></div></div>
            
        </li>
        
        
        <li id='section-272'>
            <div class="annotation">
              
              <hr>

            </div>
            
        </li>
        
        
        <li id='Image-Resources'>
            <div class="annotation">
              
                
                <div class="pilwrap for-h2">
                  <a class="pilcrow" href="#Image-Resources">&#182;</a>
                </div>
              
              <h2>Image Resources</h2>

            </div>
            
        </li>
        
        
        <li id='section-274'>
            <div class="annotation">
              
              <p>Alhough we do what we can to hide the fact, Reel actually needs a few image resources to support
some of its actions. First, we may need a transparent image for the original <code>&lt;img&gt;</code> to uncover
the sprite applied to its background. This one is embedded in the code as it is very small.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    transparent= knows_data_urls ? embedded(<span class="string">'CAAIAIAAAAAAAAAAACH5BAEAAAAALAAAAAAIAAgAAAIHhI+py+1dAAA7'</span>) : _cdn_+<span class="string">'blank.gif'</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-275'>
            <div class="annotation">
              
              <p>Proper cross-browser cursors however need to come in an odd format, which essentially is not
compressed at all and this means bigger filesize. While it is no more than ~15k, it is unfit
for embedding directly here, so a <a href="#Content-Delivery-Network"><code>CDN</code></a> is employed to retrieve
the images from in an effective gzipped and cachable manner.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    reel_cursor= url(_cdn_+_jquery_reel_+<span class="string">'.cur'</span>)+____+_move_,
    drag_cursor= url(_cdn_+_jquery_reel_+<span class="string">'-drag.cur'</span>)+____+_move_,
    drag_cursor_down= url(_cdn_+_jquery_reel_+<span class="string">'-drag-down.cur'</span>)+____+_move_,</pre></div></div>
            
        </li>
        
        
        <li id='section-276'>
            <div class="annotation">
              
              <p>~~~</p>
<p>We then only route around MSIE&#39;s left button identification quirk (IE 8- reports left as right).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    lazy= reel.lazy= (reel.re.lazy_agent).test(client),

    DRAG_BUTTON= ie &amp;&amp; browser_version &lt; <span class="number">9</span> ? <span class="number">1</span> : <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id='section-277'>
            <div class="annotation">
              
              <p>~~~</p>
<p>So far jQuery doesn&#39;t have a proper built-in mechanism to detect/report DOM node removal.
But internally, jQuery calls <code>$.cleanData()</code> to flush the DOM data and minimize memory leaks.
Reel wraps this function and as a result <code>clean</code> event handler is triggered for every element.
Note, that the <code>clean</code> event does not bubble.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    cleanData= $.cleanData,
    cleanDataEvent= $.cleanData= <span class="keyword">function</span>(elements){
      $(elements).each(<span class="keyword">function</span>(){ $(<span class="keyword">this</span>).triggerHandler(<span class="string">'clean'</span>); });
      <span class="keyword">return</span> cleanData.apply(<span class="keyword">this</span>, arguments);
    }</pre></div></div>
            
        </li>
        
        
        <li id='section-278'>
            <div class="annotation">
              
              <p>Expose plugin functions as jQuery methods, do the initial global scan for data-configured
<code>&lt;img</code>&gt; tags to become enhanced and export the entire namespace module.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $.extend($.fn, reel.fn) &amp;&amp; $(reel.scan);
  <span class="keyword">return</span> reel;</pre></div></div>
            
        </li>
        
        
        <li id='section-279'>
            <div class="annotation">
              
              <p>Bunch of very useful helpers.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">add_instance</span><span class="params">($instance)</span>{</span> <span class="keyword">return</span> (reel.instances.push($instance[<span class="number">0</span>])) &amp;&amp; $instance }
  <span class="function"><span class="keyword">function</span> <span class="title">remove_instance</span><span class="params">($instance)</span>{</span> <span class="keyword">return</span> (reel.instances= reel.instances.not(hash($instance.attr(_id_)))) &amp;&amp; $instance }
  <span class="function"><span class="keyword">function</span> <span class="title">leader</span><span class="params">(key)</span>{</span> <span class="keyword">return</span> reel.instances.first().data(key) }
  <span class="function"><span class="keyword">function</span> <span class="title">embedded</span><span class="params">(image)</span>{</span> <span class="keyword">return</span> <span class="string">'data:image/gif;base64,R0lGODlh'</span> + image }
  <span class="function"><span class="keyword">function</span> <span class="title">tag</span><span class="params">(string)</span>{</span> <span class="keyword">return</span> <span class="string">'&lt;'</span> + string + <span class="string">'/&gt;'</span> }
  <span class="function"><span class="keyword">function</span> <span class="title">dot</span><span class="params">(string)</span>{</span> <span class="keyword">return</span> <span class="string">'.'</span> + (string || <span class="string">''</span>) }
  <span class="function"><span class="keyword">function</span> <span class="title">cdn</span><span class="params">(path)</span>{</span> <span class="keyword">return</span> path.replace(_cdn_, reel.cdn) }
  <span class="function"><span class="keyword">function</span> <span class="title">url</span><span class="params">(location)</span>{</span> <span class="keyword">return</span> <span class="string">'url(\''</span> + reen(location) + <span class="string">'\')'</span> }
  <span class="function"><span class="keyword">function</span> <span class="title">axis</span><span class="params">(key, value)</span>{</span> <span class="keyword">return</span> <span class="keyword">typeof</span> value == _object_ ? value[key] : value }
  <span class="function"><span class="keyword">function</span> <span class="title">min_max</span><span class="params">(minimum, maximum, number)</span>{</span> <span class="keyword">return</span> max(minimum, min(maximum, number)) }
  <span class="function"><span class="keyword">function</span> <span class="title">negative_when</span><span class="params">(value, condition)</span>{</span> <span class="keyword">return</span> abs(value) * (condition ? -<span class="number">1</span> : <span class="number">1</span>) }
  <span class="function"><span class="keyword">function</span> <span class="title">pointer</span><span class="params">(e)</span>{</span> <span class="keyword">return</span> e.touch || e.originalEvent.touches &amp;&amp; e.originalEvent.touches[<span class="number">0</span>] || e }
  <span class="function"><span class="keyword">function</span> <span class="title">gyro</span><span class="params">(e)</span>{</span> <span class="keyword">return</span> e.originalEvent }
  <span class="function"><span class="keyword">function</span> <span class="title">px</span><span class="params">(value)</span>{</span> <span class="keyword">return</span> value === <span class="literal">undefined</span> ? <span class="number">0</span> : <span class="keyword">typeof</span> value == _string_ ? value : value + <span class="string">'px'</span> }
  <span class="function"><span class="keyword">function</span> <span class="title">hash</span><span class="params">(value)</span>{</span> <span class="keyword">return</span> <span class="string">'#'</span> + value }
  <span class="function"><span class="keyword">function</span> <span class="title">pad</span><span class="params">(string, len, fill)</span>{</span> <span class="keyword">while</span> (string.length &lt; len) string= fill + string; <span class="keyword">return</span> string }
  <span class="function"><span class="keyword">function</span> <span class="title">twochar</span><span class="params">(string)</span>{</span> <span class="keyword">return</span> pad(string, <span class="number">2</span>, <span class="string">'0'</span>) }
  <span class="function"><span class="keyword">function</span> <span class="title">reen</span><span class="params">(uri)</span>{</span> <span class="keyword">return</span> encodeURI(decodeURI(uri)) }
  <span class="function"><span class="keyword">function</span> <span class="title">soft_array</span><span class="params">(string)</span>{</span> <span class="keyword">return</span> reel.re.array.exec(string) ? string.split(reel.re.array) : string }
  <span class="function"><span class="keyword">function</span> <span class="title">detached</span><span class="params">($node)</span>{</span> <span class="keyword">return</span> !$node.parents(_html_).length }
  <span class="function"><span class="keyword">function</span> <span class="title">numerize_array</span><span class="params">(array)</span>{</span> <span class="keyword">return</span> <span class="keyword">typeof</span> array == _string_ ? array : $.each(array, <span class="keyword">function</span>(ix, it){ array[ix]= it ? +it : <span class="literal">undefined</span> }) }
  <span class="function"><span class="keyword">function</span> <span class="title">error</span><span class="params">(message)</span>{</span> <span class="keyword">try</span>{ console.error(<span class="string">'[ Reel ] '</span>+message) }<span class="keyword">catch</span>(e){} }
})(jQuery, window, document);

});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
